<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data visualization in R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Elena Quintero" />
    <script src="libs/header-attrs-2.14/header-attrs.js"></script>
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.0/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-3.5.1/jquery.min.js"></script>
    <link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


name: title

class: inverse, center, middle

&lt;style&gt;
h1{
  margin-bottom: 15px;
}
h2{
  margin-bottom: 5px;
}
h3{
  margin-bottom: 5px;
  margin-top: 5px;
}
p{
  margin-top: 10px;
}
&lt;/style&gt;





#  Visualización de datos en R 
# &lt;span style = "font-family: Courier New, monospace"&gt;ggplot&lt;/span style&gt;

&amp;nbsp;

&lt;font size ="6"&gt;.large[Elena Quintero | Curso R AEET | 20 Sept 2022]

---

# Paquetes necesarios:


```r
install.packages(c("here",
                   "tidyverse", 
                   "patchwork",
                   "RColorBrewer"))
```

---

# Paquetes necesarios:


```r
library(here)           #refiere la ruta a la carpeta del proyecto
library(tidyverse)      #incluye la librería ggplot2
library(ggplot2)        #VISUALIZACIÓN DE DATOS
library(RColorBrewer)   #paletas de color 
library(plotly)         #hacer los gráficos interactivos
library(patchwork)      #combinar gráficos de ggplot
```

---

# Beneficios de usar `library(ggplot2)`

&amp;nbsp;

- Reproducible

- Consistencia gramática

- Muy flexible y permite controlar gran cantidad de detalles

- Fácil para uso básico

- Comunidad de usuarios activos

---

class: bottom
background-image: url("https://raw.githubusercontent.com/BlakeRMills/TidyTuesday/main/2022/Dog%20Breeds%20(1%20Feb%202022)/DogPlot.png")
background-size: contain

[Blake Robert Mills](https://www.blakerobertmills.com/my-work/visualizations)
|
[code here](https://acortar.link/AV8eUw)

---

class: bottom
background-image: url(https://lauranavarroviz.files.wordpress.com/2020/08/penguinsbill_plot_final.png?w=1017)
background-size: contain

[Laura Navarro](https://lauranavarroviz.wordpress.com/2020/08/01/palmer-penguins/)
| 
[code here](https://github.com/lau-cloud/TidyTuesdaycode/blob/master/palmer_penguins.R)

---

class: bottom
background-image: url(https://mir-s3-cdn-cf.behance.net/project_modules/1400_opt_1/44a415100683383.631e30537753e.png)
background-size: contain

[Cédric Scherer](https://www.cedricscherer.com/)
|
[code here](https://www.behance.net/gallery/100683383/Travelling-to-Outer-Space)

---

class: bottom
background-image: url(https://pbs.twimg.com/media/FGDPM_hXIAAac-k?format=jpg&amp;name=4096x4096)
background-size: contain

[Blake Robert Mills](https://www.blakerobertmills.com/my-work/visualizations)
|
[code here](https://acortar.link/G4FZWa)

---

class: bottom
background-image: url(https://jakelawlor.github.io/images/portfolio/tt_feb20_co2.png)
background-size: contain

[Jake Lawlor](https://jakelawlor.github.io/portfolio/)
|
[code here](https://github.com/jakelawlor/TidyTuesday_JL/blob/master/CodeFiles/Feb.18.20.CO2Food.R)

---

class: bottom
background-image: url(https://timogrossenbacher.ch/wp-content/uploads/2016/12/tm-final-map-1-1.png)
background-size: contain

[Timo Grossenbacher](https://timogrossenbacher.ch/2016/12/beautiful-thematic-maps-with-ggplot2-only/)
|
[code here](https://github.com/grssnbchr/thematic-maps-ggplot2)

---

class: bottom
background-image: url(https://raw.githubusercontent.com/Z3tt/30DayMapChallenge/master/contributions/Day03_Polygons/Polygons_GlobalMortality.png)
background-size: contain

[Cédric Scherer](https://www.cedricscherer.com/)
|
[code here](https://github.com/z3tt/30DayMapChallenge2019/blob/main/contributions/Day03_Polygons/3_Polygons.Rmd)

---

class: center, middle

&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/petris/2022-04-04.png", width=25%&gt;
&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/squares/2021-02-28.png", width=25%&gt;
&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/gemstones/2021-08-20.png", width=25%&gt;
&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/watercolors/2021-09-22.png", width=25%&gt;
&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/functions/2021-03-17.png", width=25%&gt;
&lt;img src="https://raw.githubusercontent.com/koenderks/aRtsy/development/png/nebulas/2021-08-29.png", width=25%&gt;

[aRtsy: Generative Art with R and ggplot2](https://koenderks.github.io/aRtsy/)

---

## Gramática de `ggplot`

Basado en la gramática *layered grammar of graphics* - Bertin 1983, Wilkinson et al. 2005, Wickham 2010.

&lt;img src = "http://r.qcbs.ca/workshop03/book-en/images/gglayers.png", width=50%&gt;

[Illustration QCBS R workshop series](http://r.qcbs.ca/workshop03/book-en/grammar-of-graphics-gg-basics.html)

---

## Capas:

- &lt;font color="#ec7014"&gt;Data&lt;/font&gt; - *dataset a graficar; necesita formato tidy data*

- &lt;font color="#ec7014"&gt;Aesthetics&lt;/font&gt; - *describe cómo se asignan las variables del dataset (y sus escalas) a las propiedades visuales* (x, y, size, colour, fill, group, sise, shape. . . )

- &lt;font color="#ec7014"&gt;Geometries&lt;/font&gt; - *determina la forma de representar los datos* (geoms: points, lines, bars, boxplot. . . )

- Scales - *maneja las escalas de los aesthetics* (x &amp; y format, colors continuous or discrete, sizes, shapes. . . )

- Facets - *crea subplots* (facet_wrap or facet_grid. . . )

- Themes - *apariencia general del gráfico, no ligada a los datos* (title, x.axis.text, legend. . . )

- Statistics - *resume los datos con estadísticos. Muchas veces ya va implícito en el "geom"* (stats: count, density, bins, means, density. . . )

- Coordinate system - *determina el sistema de coordenadas a usar en los ejes * (cartesian, polar, map projections. . . )

&amp;nbsp;

&lt;font color="#ec7014"&gt;*Capas necesarias&lt;/font&gt;

---

class:bottom
background-image: url(https://raw.githubusercontent.com/allisonhorst/stats-illustrations/main/rstats-artwork/ggplot2_masterpiece.png)
background-size: contain

[Allison Horst Illustration](https://github.com/allisonhorst/stats-illustrations)

---

.pull-left[

&lt;font size="5"&gt;[https://biotime.st-andrews.ac.uk/](https://biotime.st-andrews.ac.uk/)

![](../img/bioTIME.png)

&lt;font size="4"&gt;Dornelas M, Antão LH, Moyes F, Bates, AE, Magurran, AE, et al. BioTIME: A database of biodiversity time series for the Anthropocene. Global Ecol Biogeogr. 2018; 27:760 - 786. https://doi.org/10.1111/geb.12729

]

.pull-right[

![](../img/butterfly_dataset.png)

&lt;font size="4"&gt;Bonebrake, T.C., Pickett, E.J., Tsang, T.P., Tak, C.Y., Vu, M.Q. &amp; Van Vu, L. (2016) Warming threat compounds habitat degradation impacts on a tropical butterfly community in Vietnam. Global Ecology and Conservation, 8, 203-211. http://dx.doi.org/10.1016/j.gecco.2016.09.003

]

---

## Leer dataset


```r
library(readr)
but &lt;- read_csv(here("data/butterfly_dataset.csv"))
```

```
## Rows: 8356 Columns: 8
## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────
## Delimiter: ","
## chr (4): plot, species, habitat, hab_type
## dbl (4): abundance, day, month, year
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

---


```r
glimpse(but)
```

```
## Rows: 8,356
## Columns: 8
## $ plot      &lt;chr&gt; "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1",…
## $ species   &lt;chr&gt; "Appias albina", "Argyreus hyperbius", "Ariadne ariadne", "Astictopterus jama", "Cethosia…
## $ abundance &lt;dbl&gt; 1, 1, 2, 1, 6, 1, 1, 5, 1, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1, 1, 1, 3, 3, 5, 2, 3, 2, 6, 1, 1,…
## $ day       &lt;dbl&gt; 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 1…
## $ month     &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 1…
## $ year      &lt;dbl&gt; 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003,…
## $ habitat   &lt;chr&gt; "agriculture", "agriculture", "agriculture", "agriculture", "agriculture", "agriculture",…
## $ hab_type  &lt;chr&gt; "open", "open", "open", "open", "open", "open", "open", "open", "open", "open", "open", "…
```

---

Convertir variable a formato fecha:

```r
but &lt;- but %&gt;%
  mutate(date = str_c(year, "-", month, "-", day)) %&gt;%
  mutate(date = as.Date(date, format = "%Y-%m-%d")) 
```

---

Convertir datos a formato fecha:


```r
glimpse(but) 
```

```
## Rows: 8,356
## Columns: 9
## $ plot      &lt;chr&gt; "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1", "T1",…
## $ species   &lt;chr&gt; "Appias albina", "Argyreus hyperbius", "Ariadne ariadne", "Astictopterus jama", "Cethosia…
## $ abundance &lt;dbl&gt; 1, 1, 2, 1, 6, 1, 1, 5, 1, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1, 1, 1, 3, 3, 5, 2, 3, 2, 6, 1, 1,…
## $ day       &lt;dbl&gt; 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 1…
## $ month     &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 1…
## $ year      &lt;dbl&gt; 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003,…
## $ habitat   &lt;chr&gt; "agriculture", "agriculture", "agriculture", "agriculture", "agriculture", "agriculture",…
## $ hab_type  &lt;chr&gt; "open", "open", "open", "open", "open", "open", "open", "open", "open", "open", "open", "…
## $ date      &lt;date&gt; 2003-10-15, 2003-10-15, 2003-10-15, 2003-10-15, 2003-10-15, 2003-10-15, 2003-10-15, 2003…
```

---

**Resumir datos:**

Calcular número de especies detectadas y abundancia total de mariposas por muestreo. 

De forma que cada fila representa un día de muestreo en un sitio concreto.


```r
but_sum &lt;- but %&gt;%
  group_by(plot, habitat, hab_type, date) %&gt;%
  summarise(n_species = n(), 
            abundance = sum(abundance))
```

```
## `summarise()` has grouped output by 'plot', 'habitat', 'hab_type'. You can override using the `.groups`
## argument.
```


```r
#but_sum &lt;- read_csv(here("data/buttefly_summary.csv"))
```

---

### 1. Data

Dar a ggplot el dataset

.pull-left[

```r
ggplot(data = but_sum)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-9-1.png" width="504" /&gt;
]

---

### 2. Aesthetics

Definir los aesthetics (variables a visualizar)

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance))
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-10-1.png" width="504" /&gt;
]

---

### 3. Geoms

Determinar la forma de representar los datos

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance)) +
  geom_point()
```
]

.pull-right[

&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-11-1.png" width="504" /&gt;
]

---

### 3. Geoms

Rasgos de los aesthetics:

- **position** - x and y
- **shape** - integer/shape name or a single character ("a")
- **size** - integer (line width in mm)
- **color and fill** - string ("red", formato hexadecimal = #RRGGBB)
- **linetype** - integer or string (0 = "blank", 1 = "solid", 2 = "dashed", 3 = "dotted", 4 = "dotdash", 5 = "longdash", 6 = "twodash")
- **lineend** - string ("round", "butt", or "square") 
- **linejoin** - string ("round", "mitre", or "bevel") 

&lt;img src = "https://clauswilke.com/dataviz/aesthetic_mapping_files/figure-html/common-aesthetics-1.png", width=60%&gt;

---

### 3. Geoms

Añadir color a los puntos

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance)) +
  geom_point(color = "orange")
```
]

.pull-right[

&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-12-1.png" width="504" /&gt;

]

---

### 3. Geoms 

Modificar la estética de los puntos

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance)) +
  geom_point(color = "purple", 
             shape = "triangle",
             size = 3.8, 
             alpha = 0.5)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-13-1.png" width="504" /&gt;
]

---

### 3. Geoms

Definir color basado en una variable

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
*                   color = n_species)) +
  geom_point()
```
]

.pull-right[

&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-14-1.png" width="504" /&gt;
]

---

### Ejercicio 1:

Graficar número de especies vs. tiempo, donde el tamaño del punto represente la abundancia de mariposas en el muestreo

---

### Ejercicio 1:

Graficar número de especies vs. tiempo, donde el tamaño del punto represente la abundancia de mariposas en el muestreo

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = n_species, 
                    size = abundance)) +
  geom_point()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-15-1.png" width="504" /&gt;

]

---

### 4. Scales

Escala continua - dar valores de forma manual

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) +
  geom_point() + 
* scale_color_gradient(low = "gold",
*                      high = "red")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-16-1.png" width="504" /&gt;
]

---

### 4. Scales

Escala continua - paleta viridis

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) +
  geom_point() + 
* scale_color_viridis_b()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-17-1.png" width="504" /&gt;
]

---

### 4. Scales

Paletas de color para ggplot

.pull-left[

```r
library(RColorBrewer)
display.brewer.all(
  colorblindFriendly = TRUE)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-18-1.png" width="504" /&gt;
]

---

### Paletas de color

.pull-left[

```r
library(rcartocolor)

rcartocolor::display_carto_all(
  colorblind_friendly = TRUE)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-19-1.png" width="504" /&gt;
]

---

### Paletas de color

.pull-left[

```r
library(MetBrewer)

MetBrewer::display_all()
```

```r
#colorblind_only = TRUE
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-20-1.png" width="504" /&gt;
]

---

### Paletas de color

Addin de RStudio para seleccionar colores.


```r
library(colourpicker)
```

&lt;img src = "https://github.com/daattali/colourpicker/raw/master/inst/img/colourpickerscrnshot.png", width = 40%&gt;

https://github.com/daattali/colourpicker

---

### Paletas de color

Páginas web para elegir colores:

- https://colorbrewer2.org/
- https://projects.susielu.com/viz-palette
- https://medialab.github.io/iwanthue/

Útil para generar figuras adecuadas para daltonismo.

---

### 4. Scales

Escala de valores continuos

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) + 
  geom_point() + 
* scale_color_distiller(palette = "RdYlBu")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-22-1.png" width="504" /&gt;
]

---

### 4. Scales

Color basado en una escala discreta (ej. hábitat)

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
*                   color = habitat)) +
  geom_point()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-23-1.png" width="504" /&gt;
]

---

### 4. Scales

Color basado en una escala discreta - color brewer

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = habitat)) +
  geom_point() + 
* rcartocolor::scale_color_carto_d("Safe")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-24-1.png" width="504" /&gt;
]

---

### 4. Scales

Escala discreta - usar valores pre-establecidos manualmente 

.pull-left[

```r
hab_cols &lt;- c("agriculture" = "yellow",
        "disturbed_forest" = "brown",
        "closed_forest" = "dark green",
        "road" = "grey",
        "secondary_forest" = "light green",
        "bamboo_forest" = "light blue",
        "unknown" = "black")
```


```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = habitat)) +
  geom_point() + 
* scale_color_manual(values = hab_cols)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-26-1.png" width="504" /&gt;
]

---

### 4. Scales

Escala de los ejes

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) +
  geom_point() +
  scale_y_continuous(n.breaks = 10,
*   minor_breaks = c(550, 650, 750, 850))
```
Otros argumentos útiles: breaks, limits, trans (exp, log...)
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-27-1.png" width="504" /&gt;
]

---

### 4. Scales

Escala de los ejes - logarítmica

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) +
  geom_point() +
* scale_y_log10()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-28-1.png" width="504" /&gt;
]

---

### 4. Scales

Escala de los ejes - en reverso

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = abundance, 
                    color = n_species)) +
  geom_point() +
* scale_y_reverse()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-29-1.png" width="504" /&gt;
]

---

### Ejercicio 2:

Graficar numero de especies vs. abundancia, donde el color del punto represente el tipo de hábitat (forest vs. open).

---

### Ejercicio 2:

Graficar numero de especies vs. abundancia, donde el color del punto represente el tipo de hábitat (forest vs. open).

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
*                   color = hab_type)) +
  geom_point(alpha = 0.5) + 
  scale_color_manual(values = 
         c("dark green", "brown"))
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-30-1.png" width="504" /&gt;
]

---

### Ejercicio 2:

Graficar numero de especies ~ abundancia, donde el color del punto represente el tipo de hábitat (forest vs. open).

.pull-left[

Cambiar a escala log-log.


```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
                    color = hab_type)) + 
  geom_point(alpha = 0.5) + 
  scale_color_manual(values = 
         c("dark green", "brown")) + 
* scale_x_log10() +
* scale_y_log10()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-31-1.png" width="504" /&gt;
]

---

### Geom - línea de tendencia

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance)) +
  geom_point() +
* geom_smooth()
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-32-1.png" width="504" /&gt;
]

---

### Geom - línea de tendencia

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance)) +
  geom_point() +
  geom_smooth() + 
* geom_rug()
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-33-1.png" width="504" /&gt;
]

---

### Geom - línea de tendencia

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
*                   color = hab_type)) +
  geom_point() +
  geom_smooth()
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-34-1.png" width="504" /&gt;
]

---

### Geom - línea de tendencia

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
                    color = hab_type)) +
  geom_point() +
* geom_smooth(method = "lm")
```

```
## `geom_smooth()` using formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-35-1.png" width="504" /&gt;
]

---

### 5. Scale vs. Geometry 

Limitar la escala del eje vs recortar el eje

.pull-left[


```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
                    color = hab_type)) +
  geom_point() +
  geom_smooth(method="lm") +
* scale_y_continuous(limits = c(0, 300))
```

```
## `geom_smooth()` using formula 'y ~ x'
```

```
## Warning: Removed 3 rows containing non-finite values (stat_smooth).
```

```
## Warning: Removed 3 rows containing missing values (geom_point).
```

```
## Warning: Removed 8 rows containing missing values (geom_smooth).
```
Si limitamos la escala, "borramos" los puntos que se quedan fuera del límite, y dejan de ser considerados para estimar las líneas de tendencia.
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-36-1.png" width="504" /&gt;
]

---

### 5. Scale vs. Geometry 

Limitar la escala del eje vs recortar el eje

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance,
                    color = hab_type)) +
  geom_point() +
  geom_smooth(method ="lm") +
* coord_cartesian(ylim = c(0, 300))
```

```
## `geom_smooth()` using formula 'y ~ x'
```

Si limitamos el eje, "recortamos" el gráfico (en este caso hacemos un zoom). Los puntos que quedan fuera del límite siguen siendo considerandos y se mantienen para el calculo de la línea de tendencia.
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-37-1.png" width="504" /&gt;
]

---

### Más geoms

Lineas horizontales y verticales

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance)) +
  geom_point() +
* geom_vline(xintercept = 30) +
* geom_hline(yintercept = c(250, 750),
*            color = "red")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-38-1.png" width="504" /&gt;
]

---

### 7. Labs

Añadir título, nombre de ejes y leyenda

.pull-left[

```r
ggplot(but_sum, aes(x = n_species, 
                    y = abundance)) +
  geom_point() +
* labs(x = "No. de especies",
*      y = "Abundancia",
*      title = "Muestreos de mariposas en Vietnam",
*      caption = "cada punto representa un muestreo")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-39-1.png" width="504" /&gt;
]

---

### Ejercicio 3

Crear una gráfico lo más similar a este:

&lt;img src="data_visualization_slides_files/figure-html/ej3.1-1.png" width="504" /&gt;

---

### Ejercicio 3

.pull-left[

```r
ggplot(but_sum, aes(x = date, 
                    y = n_species, 
                    color = abundance)) +
  geom_point() +
  scale_color_distiller(palette = "Spectral") + 
  labs(x = "Año", 
       y = "Número de especies",
       title = "Muestreos de mariposas en Vietnam",
       subtitle = "Datos de Bonebrake et al. 2016",
       color = "Abundancia")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-40-1.png" width="504" /&gt;
]

---

### GGplotly


```r
library(plotly)
ggplotly()
```

<div id="htmlwidget-b9c616e6b5ece817da6b" style="width:504px;height:504px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-b9c616e6b5ece817da6b">{"x":{"data":[{"x":[12229,12250,12252,12253,12254,12281,12283,12284,12340,12341,12342,12553,12556,12558,12559,12587,12588,12589,12590,12616,12617,12648,12649,12650,12678,12680,12702,12703,12704,12705,12951,12952,12954,12980,12981,12983,12984,13012,13013,13014,13015,13016,13043,13046,13047,13065,13067,13068,13087,13315,13318,13320,13345,13348,13380,13381,13408,13410,13429,13432,13451,13681,13684,13712,13714,13772,13775,13793,13795,14049,14050,14053,14164,14168,15537,15538,15539,15573,15577,15604,15619,15626,15627,15640,15843,15844,15858,15860,15900,15935,15969,15971,15990,12229,12250,12253,12282,12283,12284,12338,12340,12341,12342,12554,12555,12556,12558,12586,12587,12589,12590,12616,12617,12648,12650,12678,12680,12704,12705,12920,12924,12951,12952,12954,12980,12983,12984,13012,13013,13014,13015,13016,13043,13046,13047,13065,13067,13087,13316,13318,13320,13345,13348,13380,13381,13408,13410,13429,13432,13451,13453,13454,13681,13684,13712,13714,13772,13775,13793,13795,14049,14051,14164,14165,14167,14168,15536,15537,15538,15539,15573,15619,15626,15627,15640,15843,15844,15858,15861,15900,15935,15969,15971,15990,12229,12250,12251,12252,12253,12283,12284,12341,12342,12559,12586,12587,12589,12590,12616,12617,12648,12650,12678,12680,12702,12704,12705,12706,12924,12951,12952,12954,12980,12981,12983,12984,13012,13013,13014,13015,13016,13043,13046,13047,13065,13067,13087,13316,13318,13320,13345,13348,13380,13381,13408,13410,13429,13432,13451,13454,13681,13684,13712,13714,13772,13775,13793,13795,14049,14164,14165,14168,15501,15536,15537,15538,15539,15573,15619,15627,15640,15843,15844,15861,15900,15935,15969,15971,15990,12229,12252,12253,12254,12280,12281,12283,12337,12338,12340,12342,12553,12558,12559,12585,12586,12587,12589,12615,12616,12617,12648,12649,12650,12677,12679,12680,12703,12704,12918,12919,12920,12922,12924,12952,12955,12979,12980,12981,12982,12983,13011,13012,13013,13014,13015,13042,13046,13047,13064,13065,13066,13068,13087,13088,13315,13317,13319,13344,13347,13348,13349,13375,13380,13381,13399,13407,13411,13428,13430,13431,13433,13434,13450,13452,13453,13679,13680,13684,13711,13715,13771,13773,13774,13776,13792,13794,13797,14047,14050,14051,14163,14167,14168,15501,15537,15538,15575,15577,15625,15626,15627,15640,15843,15844,15860,15861,15899,15934,15970,15991,12920,12921,12951,12953,12955,12980,12981,12982,12983,13013,13014,13015,13043,13046,13047,13048,13065,13087,13088,13091,13318,13319,13321,13348,13349,13379,13380,13381,13409,13430,13431,13453,13683,13684,13713,13714,13717,13773,13776,13794,13797,14165,14168,15537,15538,15540,15575,15606,15626,15627,15640,15843,15844,15859,15899,15934,15970,15991,13047,13067,13316,13345,13381,13408,13410,13429,13432,13451,13685,13772,13793,14050,14164,14165,15536,15537,15538,15539,15574,15626,15627,15640,15843,15858,15935,15969,15970,15990,13685],"y":[17,7,16,11,11,13,16,10,30,29,39,17,9,11,16,24,13,15,18,26,26,13,20,19,29,26,7,28,25,20,28,9,6,15,12,6,10,13,14,8,5,11,8,8,12,4,14,15,11,13,10,9,19,18,16,15,8,15,21,18,24,24,26,14,11,15,23,25,20,26,52,31,17,23,9,7,10,9,6,5,22,20,25,19,18,24,16,24,27,20,24,21,21,11,6,9,5,9,5,12,12,18,5,11,5,6,4,17,16,19,11,14,11,11,9,9,16,9,14,13,21,25,15,5,7,10,3,4,6,5,3,6,7,2,6,7,9,8,18,12,9,12,11,13,11,14,5,15,5,18,13,11,18,21,10,12,11,25,18,24,49,35,11,18,7,17,11,10,8,10,12,19,18,23,19,24,21,21,19,19,25,33,18,30,9,5,6,4,6,6,12,5,9,5,6,16,11,12,11,9,8,10,10,11,6,10,5,7,8,19,11,7,7,2,9,7,4,3,9,4,12,12,1,6,14,11,2,21,6,13,18,19,15,17,14,13,20,15,20,19,24,34,24,24,14,29,24,26,39,16,27,22,30,18,19,13,14,14,19,24,16,28,28,39,27,24,16,18,25,23,18,16,21,20,17,27,27,29,18,25,19,16,32,35,28,30,25,47,32,27,29,26,25,29,37,30,33,28,20,16,23,22,21,35,26,16,19,22,18,22,18,20,13,21,22,23,23,14,17,19,22,20,18,17,27,19,47,16,26,19,23,20,24,15,12,22,22,24,22,29,26,23,30,47,38,23,21,27,17,16,29,33,26,25,29,30,20,32,41,36,23,11,16,26,15,12,5,10,21,23,21,31,25,21,28,29,18,21,25,19,15,41,17,35,28,23,22,25,17,15,16,20,18,11,10,11,32,6,7,16,26,27,26,39,17,15,21,26,27,13,41,33,16,23,31,6,30,27,33,41,14,21,40,29,26,29,19,18,16,19,24,46,45,38,30,41,35,48,4,9,6,7,4,6,7,7,6,6,4,5,8,11,9,12,7,6,3,7,4,4,5,6,15,9,9,10,9,10,27],"text":["date: 2003-06-26<br />n_species: 17<br />abundance:  26","date: 2003-07-17<br />n_species:  7<br />abundance:  13","date: 2003-07-19<br />n_species: 16<br />abundance:  34","date: 2003-07-20<br />n_species: 11<br />abundance:  39","date: 2003-07-21<br />n_species: 11<br />abundance:  14","date: 2003-08-17<br />n_species: 13<br />abundance:  21","date: 2003-08-19<br />n_species: 16<br />abundance:  26","date: 2003-08-20<br />n_species: 10<br />abundance:  15","date: 2003-10-15<br />n_species: 30<br />abundance:  59","date: 2003-10-16<br />n_species: 29<br />abundance:  85","date: 2003-10-17<br />n_species: 39<br />abundance: 146","date: 2004-05-15<br />n_species: 17<br />abundance:  29","date: 2004-05-18<br />n_species:  9<br />abundance:  37","date: 2004-05-20<br />n_species: 11<br />abundance:  30","date: 2004-05-21<br />n_species: 16<br />abundance:  34","date: 2004-06-18<br />n_species: 24<br />abundance:  35","date: 2004-06-19<br />n_species: 13<br />abundance:  31","date: 2004-06-20<br />n_species: 15<br />abundance:  27","date: 2004-06-21<br />n_species: 18<br />abundance:  37","date: 2004-07-17<br />n_species: 26<br />abundance:  80","date: 2004-07-18<br />n_species: 26<br />abundance: 128","date: 2004-08-18<br />n_species: 13<br />abundance:  28","date: 2004-08-19<br />n_species: 20<br />abundance:  31","date: 2004-08-20<br />n_species: 19<br />abundance:  56","date: 2004-09-17<br />n_species: 29<br />abundance: 103","date: 2004-09-19<br />n_species: 26<br />abundance:  92","date: 2004-10-11<br />n_species:  7<br />abundance:  49","date: 2004-10-12<br />n_species: 28<br />abundance: 101","date: 2004-10-13<br />n_species: 25<br />abundance:  62","date: 2004-10-14<br />n_species: 20<br />abundance:  42","date: 2005-06-17<br />n_species: 28<br />abundance:  64","date: 2005-06-18<br />n_species:  9<br />abundance:  27","date: 2005-06-20<br />n_species:  6<br />abundance:   7","date: 2005-07-16<br />n_species: 15<br />abundance:  24","date: 2005-07-17<br />n_species: 12<br />abundance:  17","date: 2005-07-19<br />n_species:  6<br />abundance:   9","date: 2005-07-20<br />n_species: 10<br />abundance:  14","date: 2005-08-17<br />n_species: 13<br />abundance:  18","date: 2005-08-18<br />n_species: 14<br />abundance:  21","date: 2005-08-19<br />n_species:  8<br />abundance:  14","date: 2005-08-20<br />n_species:  5<br />abundance:   8","date: 2005-08-21<br />n_species: 11<br />abundance:  17","date: 2005-09-17<br />n_species:  8<br />abundance:   8","date: 2005-09-20<br />n_species:  8<br />abundance:  11","date: 2005-09-21<br />n_species: 12<br />abundance:  27","date: 2005-10-09<br />n_species:  4<br />abundance:   5","date: 2005-10-11<br />n_species: 14<br />abundance:  33","date: 2005-10-12<br />n_species: 15<br />abundance:  22","date: 2005-10-31<br />n_species: 11<br />abundance:  24","date: 2006-06-16<br />n_species: 13<br />abundance:  36","date: 2006-06-19<br />n_species: 10<br />abundance:  25","date: 2006-06-21<br />n_species:  9<br />abundance:  13","date: 2006-07-16<br />n_species: 19<br />abundance:  27","date: 2006-07-19<br />n_species: 18<br />abundance:  65","date: 2006-08-20<br />n_species: 16<br />abundance:  49","date: 2006-08-21<br />n_species: 15<br />abundance:  49","date: 2006-09-17<br />n_species:  8<br />abundance:  13","date: 2006-09-19<br />n_species: 15<br />abundance:  23","date: 2006-10-08<br />n_species: 21<br />abundance:  48","date: 2006-10-11<br />n_species: 18<br />abundance:  42","date: 2006-10-30<br />n_species: 24<br />abundance:  68","date: 2007-06-17<br />n_species: 24<br />abundance:  45","date: 2007-06-20<br />n_species: 26<br />abundance:  73","date: 2007-07-18<br />n_species: 14<br />abundance:  21","date: 2007-07-20<br />n_species: 11<br />abundance:  22","date: 2007-09-16<br />n_species: 15<br />abundance:  44","date: 2007-09-19<br />n_species: 23<br />abundance:  68","date: 2007-10-07<br />n_species: 25<br />abundance:  59","date: 2007-10-09<br />n_species: 20<br />abundance:  52","date: 2008-06-19<br />n_species: 26<br />abundance:  82","date: 2008-06-20<br />n_species: 52<br />abundance: 261","date: 2008-06-23<br />n_species: 31<br />abundance: 111","date: 2008-10-12<br />n_species: 17<br />abundance:  45","date: 2008-10-16<br />n_species: 23<br />abundance:  60","date: 2012-07-16<br />n_species:  9<br />abundance:  13","date: 2012-07-17<br />n_species:  7<br />abundance:  13","date: 2012-07-18<br />n_species: 10<br />abundance:  18","date: 2012-08-21<br />n_species:  9<br />abundance:  20","date: 2012-08-25<br />n_species:  6<br />abundance:  13","date: 2012-09-21<br />n_species:  5<br />abundance:   7","date: 2012-10-06<br />n_species: 22<br />abundance:  72","date: 2012-10-13<br />n_species: 20<br />abundance:  33","date: 2012-10-14<br />n_species: 25<br />abundance:  51","date: 2012-10-27<br />n_species: 19<br />abundance:  41","date: 2013-05-18<br />n_species: 18<br />abundance:  47","date: 2013-05-19<br />n_species: 24<br />abundance:  48","date: 2013-06-02<br />n_species: 16<br />abundance:  41","date: 2013-06-04<br />n_species: 24<br />abundance:  67","date: 2013-07-14<br />n_species: 27<br />abundance:  71","date: 2013-08-18<br />n_species: 20<br />abundance:  35","date: 2013-09-21<br />n_species: 24<br />abundance:  48","date: 2013-09-23<br />n_species: 21<br />abundance:  31","date: 2013-10-12<br />n_species: 21<br />abundance:  55","date: 2003-06-26<br />n_species: 11<br />abundance:  21","date: 2003-07-17<br />n_species:  6<br />abundance:  17","date: 2003-07-20<br />n_species:  9<br />abundance:  23","date: 2003-08-18<br />n_species:  5<br />abundance:  15","date: 2003-08-19<br />n_species:  9<br />abundance:  21","date: 2003-08-20<br />n_species:  5<br />abundance:  12","date: 2003-10-13<br />n_species: 12<br />abundance:  28","date: 2003-10-15<br />n_species: 12<br />abundance:  34","date: 2003-10-16<br />n_species: 18<br />abundance:  47","date: 2003-10-17<br />n_species:  5<br />abundance:  17","date: 2004-05-16<br />n_species: 11<br />abundance:  35","date: 2004-05-17<br />n_species:  5<br />abundance:  28","date: 2004-05-18<br />n_species:  6<br />abundance:  35","date: 2004-05-20<br />n_species:  4<br />abundance:  26","date: 2004-06-17<br />n_species: 17<br />abundance:  43","date: 2004-06-18<br />n_species: 16<br />abundance:  50","date: 2004-06-20<br />n_species: 19<br />abundance:  49","date: 2004-06-21<br />n_species: 11<br />abundance:  38","date: 2004-07-17<br />n_species: 14<br />abundance:  74","date: 2004-07-18<br />n_species: 11<br />abundance:  78","date: 2004-08-18<br />n_species: 11<br />abundance:  25","date: 2004-08-20<br />n_species:  9<br />abundance:  18","date: 2004-09-17<br />n_species:  9<br />abundance:  67","date: 2004-09-19<br />n_species: 16<br />abundance: 142","date: 2004-10-13<br />n_species:  9<br />abundance:  48","date: 2004-10-14<br />n_species: 14<br />abundance:  65","date: 2005-05-17<br />n_species: 13<br />abundance:  20","date: 2005-05-21<br />n_species: 21<br />abundance: 117","date: 2005-06-17<br />n_species: 25<br />abundance:  58","date: 2005-06-18<br />n_species: 15<br />abundance:  41","date: 2005-06-20<br />n_species:  5<br />abundance:   5","date: 2005-07-16<br />n_species:  7<br />abundance:  16","date: 2005-07-19<br />n_species: 10<br />abundance:  15","date: 2005-07-20<br />n_species:  3<br />abundance:   6","date: 2005-08-17<br />n_species:  4<br />abundance:   4","date: 2005-08-18<br />n_species:  6<br />abundance:  12","date: 2005-08-19<br />n_species:  5<br />abundance:  10","date: 2005-08-20<br />n_species:  3<br />abundance:   5","date: 2005-08-21<br />n_species:  6<br />abundance:  12","date: 2005-09-17<br />n_species:  7<br />abundance:  20","date: 2005-09-20<br />n_species:  2<br />abundance:   2","date: 2005-09-21<br />n_species:  6<br />abundance:   8","date: 2005-10-09<br />n_species:  7<br />abundance:  10","date: 2005-10-11<br />n_species:  9<br />abundance:  11","date: 2005-10-31<br />n_species:  8<br />abundance:  10","date: 2006-06-17<br />n_species: 18<br />abundance:  54","date: 2006-06-19<br />n_species: 12<br />abundance:  38","date: 2006-06-21<br />n_species:  9<br />abundance:  30","date: 2006-07-16<br />n_species: 12<br />abundance:  22","date: 2006-07-19<br />n_species: 11<br />abundance:  26","date: 2006-08-20<br />n_species: 13<br />abundance:  27","date: 2006-08-21<br />n_species: 11<br />abundance:  22","date: 2006-09-17<br />n_species: 14<br />abundance:  25","date: 2006-09-19<br />n_species:  5<br />abundance:   6","date: 2006-10-08<br />n_species: 15<br />abundance:  48","date: 2006-10-11<br />n_species:  5<br />abundance:   6","date: 2006-10-30<br />n_species: 18<br />abundance:  48","date: 2006-11-01<br />n_species: 13<br />abundance:  31","date: 2006-11-02<br />n_species: 11<br />abundance:  31","date: 2007-06-17<br />n_species: 18<br />abundance:  48","date: 2007-06-20<br />n_species: 21<br />abundance:  53","date: 2007-07-18<br />n_species: 10<br />abundance:  21","date: 2007-07-20<br />n_species: 12<br />abundance:  28","date: 2007-09-16<br />n_species: 11<br />abundance:  23","date: 2007-09-19<br />n_species: 25<br />abundance:  82","date: 2007-10-07<br />n_species: 18<br />abundance:  53","date: 2007-10-09<br />n_species: 24<br />abundance:  55","date: 2008-06-19<br />n_species: 49<br />abundance: 291","date: 2008-06-21<br />n_species: 35<br />abundance: 182","date: 2008-10-12<br />n_species: 11<br />abundance:  39","date: 2008-10-13<br />n_species: 18<br />abundance:  54","date: 2008-10-15<br />n_species:  7<br />abundance:  32","date: 2008-10-16<br />n_species: 17<br />abundance:  51","date: 2012-07-15<br />n_species: 11<br />abundance:  26","date: 2012-07-16<br />n_species: 10<br />abundance:  30","date: 2012-07-17<br />n_species:  8<br />abundance:  14","date: 2012-07-18<br />n_species: 10<br />abundance:  42","date: 2012-08-21<br />n_species: 12<br />abundance:  41","date: 2012-10-06<br />n_species: 19<br />abundance:  58","date: 2012-10-13<br />n_species: 18<br />abundance:  39","date: 2012-10-14<br />n_species: 23<br />abundance:  69","date: 2012-10-27<br />n_species: 19<br />abundance:  42","date: 2013-05-18<br />n_species: 24<br />abundance:  62","date: 2013-05-19<br />n_species: 21<br />abundance:  59","date: 2013-06-02<br />n_species: 21<br />abundance:  88","date: 2013-06-05<br />n_species: 19<br />abundance:  92","date: 2013-07-14<br />n_species: 19<br />abundance:  36","date: 2013-08-18<br />n_species: 25<br />abundance:  62","date: 2013-09-21<br />n_species: 33<br />abundance:  65","date: 2013-09-23<br />n_species: 18<br />abundance:  28","date: 2013-10-12<br />n_species: 30<br />abundance:  86","date: 2003-06-26<br />n_species:  9<br />abundance:  16","date: 2003-07-17<br />n_species:  5<br />abundance:  12","date: 2003-07-18<br />n_species:  6<br />abundance:  14","date: 2003-07-19<br />n_species:  4<br />abundance:  20","date: 2003-07-20<br />n_species:  6<br />abundance:  10","date: 2003-08-19<br />n_species:  6<br />abundance:  13","date: 2003-08-20<br />n_species: 12<br />abundance:  30","date: 2003-10-16<br />n_species:  5<br />abundance:  18","date: 2003-10-17<br />n_species:  9<br />abundance:  36","date: 2004-05-21<br />n_species:  5<br />abundance:  21","date: 2004-06-17<br />n_species:  6<br />abundance:  16","date: 2004-06-18<br />n_species: 16<br />abundance:  33","date: 2004-06-20<br />n_species: 11<br />abundance:  21","date: 2004-06-21<br />n_species: 12<br />abundance:  27","date: 2004-07-17<br />n_species: 11<br />abundance:  78","date: 2004-07-18<br />n_species:  9<br />abundance:  57","date: 2004-08-18<br />n_species:  8<br />abundance:  23","date: 2004-08-20<br />n_species: 10<br />abundance:  17","date: 2004-09-17<br />n_species: 10<br />abundance:  60","date: 2004-09-19<br />n_species: 11<br />abundance:  85","date: 2004-10-11<br />n_species:  6<br />abundance:  37","date: 2004-10-13<br />n_species: 10<br />abundance:  46","date: 2004-10-14<br />n_species:  5<br />abundance:  36","date: 2004-10-15<br />n_species:  7<br />abundance:  39","date: 2005-05-21<br />n_species:  8<br />abundance:  13","date: 2005-06-17<br />n_species: 19<br />abundance:  51","date: 2005-06-18<br />n_species: 11<br />abundance:  35","date: 2005-06-20<br />n_species:  7<br />abundance:  11","date: 2005-07-16<br />n_species:  7<br />abundance:  13","date: 2005-07-17<br />n_species:  2<br />abundance:   2","date: 2005-07-19<br />n_species:  9<br />abundance:  12","date: 2005-07-20<br />n_species:  7<br />abundance:  11","date: 2005-08-17<br />n_species:  4<br />abundance:   4","date: 2005-08-18<br />n_species:  3<br />abundance:   6","date: 2005-08-19<br />n_species:  9<br />abundance:  12","date: 2005-08-20<br />n_species:  4<br />abundance:   7","date: 2005-08-21<br />n_species: 12<br />abundance:  28","date: 2005-09-17<br />n_species: 12<br />abundance:  13","date: 2005-09-20<br />n_species:  1<br />abundance:   1","date: 2005-09-21<br />n_species:  6<br />abundance:  17","date: 2005-10-09<br />n_species: 14<br />abundance:  30","date: 2005-10-11<br />n_species: 11<br />abundance:  18","date: 2005-10-31<br />n_species:  2<br />abundance:   2","date: 2006-06-17<br />n_species: 21<br />abundance:  86","date: 2006-06-19<br />n_species:  6<br />abundance:  23","date: 2006-06-21<br />n_species: 13<br />abundance:  61","date: 2006-07-16<br />n_species: 18<br />abundance:  67","date: 2006-07-19<br />n_species: 19<br />abundance:  59","date: 2006-08-20<br />n_species: 15<br />abundance:  31","date: 2006-08-21<br />n_species: 17<br />abundance:  29","date: 2006-09-17<br />n_species: 14<br />abundance:  22","date: 2006-09-19<br />n_species: 13<br />abundance:  20","date: 2006-10-08<br />n_species: 20<br />abundance:  38","date: 2006-10-11<br />n_species: 15<br />abundance:  24","date: 2006-10-30<br />n_species: 20<br />abundance:  39","date: 2006-11-02<br />n_species: 19<br />abundance:  71","date: 2007-06-17<br />n_species: 24<br />abundance:  75","date: 2007-06-20<br />n_species: 34<br />abundance: 101","date: 2007-07-18<br />n_species: 24<br />abundance:  57","date: 2007-07-20<br />n_species: 24<br />abundance:  59","date: 2007-09-16<br />n_species: 14<br />abundance:  29","date: 2007-09-19<br />n_species: 29<br />abundance: 123","date: 2007-10-07<br />n_species: 24<br />abundance:  64","date: 2007-10-09<br />n_species: 26<br />abundance:  57","date: 2008-06-19<br />n_species: 39<br />abundance: 230","date: 2008-10-12<br />n_species: 16<br />abundance:  82","date: 2008-10-13<br />n_species: 27<br />abundance: 100","date: 2008-10-16<br />n_species: 22<br />abundance:  96","date: 2012-06-10<br />n_species: 30<br />abundance: 224","date: 2012-07-15<br />n_species: 18<br />abundance:  50","date: 2012-07-16<br />n_species: 19<br />abundance:  49","date: 2012-07-17<br />n_species: 13<br />abundance:  32","date: 2012-07-18<br />n_species: 14<br />abundance:  73","date: 2012-08-21<br />n_species: 14<br />abundance:  50","date: 2012-10-06<br />n_species: 19<br />abundance:  43","date: 2012-10-14<br />n_species: 24<br />abundance:  89","date: 2012-10-27<br />n_species: 16<br />abundance:  45","date: 2013-05-18<br />n_species: 28<br />abundance: 161","date: 2013-05-19<br />n_species: 28<br />abundance: 137","date: 2013-06-05<br />n_species: 39<br />abundance: 208","date: 2013-07-14<br />n_species: 27<br />abundance:  81","date: 2013-08-18<br />n_species: 24<br />abundance:  84","date: 2013-09-21<br />n_species: 16<br />abundance:  32","date: 2013-09-23<br />n_species: 18<br />abundance:  43","date: 2013-10-12<br />n_species: 25<br />abundance: 117","date: 2003-06-26<br />n_species: 23<br />abundance:  37","date: 2003-07-19<br />n_species: 18<br />abundance:  53","date: 2003-07-20<br />n_species: 16<br />abundance:  51","date: 2003-07-21<br />n_species: 21<br />abundance:  72","date: 2003-08-16<br />n_species: 20<br />abundance:  45","date: 2003-08-17<br />n_species: 17<br />abundance:  41","date: 2003-08-19<br />n_species: 27<br />abundance:  96","date: 2003-10-12<br />n_species: 27<br />abundance:  76","date: 2003-10-13<br />n_species: 29<br />abundance:  80","date: 2003-10-15<br />n_species: 18<br />abundance:  55","date: 2003-10-17<br />n_species: 25<br />abundance:  45","date: 2004-05-15<br />n_species: 19<br />abundance:  46","date: 2004-05-20<br />n_species: 16<br />abundance:  68","date: 2004-05-21<br />n_species: 32<br />abundance: 266","date: 2004-06-16<br />n_species: 35<br />abundance: 139","date: 2004-06-17<br />n_species: 28<br />abundance:  93","date: 2004-06-18<br />n_species: 30<br />abundance: 120","date: 2004-06-20<br />n_species: 25<br />abundance: 113","date: 2004-07-16<br />n_species: 47<br />abundance: 175","date: 2004-07-17<br />n_species: 32<br />abundance: 241","date: 2004-07-18<br />n_species: 27<br />abundance: 170","date: 2004-08-18<br />n_species: 29<br />abundance: 115","date: 2004-08-19<br />n_species: 26<br />abundance:  90","date: 2004-08-20<br />n_species: 25<br />abundance:  69","date: 2004-09-16<br />n_species: 29<br />abundance: 102","date: 2004-09-18<br />n_species: 37<br />abundance: 229","date: 2004-09-19<br />n_species: 30<br />abundance: 268","date: 2004-10-12<br />n_species: 33<br />abundance: 155","date: 2004-10-13<br />n_species: 28<br />abundance: 181","date: 2005-05-15<br />n_species: 20<br />abundance:  64","date: 2005-05-16<br />n_species: 16<br />abundance:  58","date: 2005-05-17<br />n_species: 23<br />abundance: 121","date: 2005-05-19<br />n_species: 22<br />abundance: 122","date: 2005-05-21<br />n_species: 21<br />abundance: 117","date: 2005-06-18<br />n_species: 35<br />abundance: 158","date: 2005-06-21<br />n_species: 26<br />abundance: 108","date: 2005-07-15<br />n_species: 16<br />abundance:  42","date: 2005-07-16<br />n_species: 19<br />abundance:  30","date: 2005-07-17<br />n_species: 22<br />abundance:  38","date: 2005-07-18<br />n_species: 18<br />abundance:  65","date: 2005-07-19<br />n_species: 22<br />abundance:  48","date: 2005-08-16<br />n_species: 18<br />abundance:  39","date: 2005-08-17<br />n_species: 20<br />abundance:  61","date: 2005-08-18<br />n_species: 13<br />abundance:  55","date: 2005-08-19<br />n_species: 21<br />abundance:  69","date: 2005-08-20<br />n_species: 22<br />abundance:  47","date: 2005-09-16<br />n_species: 23<br />abundance:  78","date: 2005-09-20<br />n_species: 23<br />abundance:  83","date: 2005-09-21<br />n_species: 14<br />abundance:  58","date: 2005-10-08<br />n_species: 17<br />abundance:  60","date: 2005-10-09<br />n_species: 19<br />abundance:  62","date: 2005-10-10<br />n_species: 22<br />abundance:  53","date: 2005-10-12<br />n_species: 20<br />abundance:  52","date: 2005-10-31<br />n_species: 18<br />abundance:  77","date: 2005-11-01<br />n_species: 17<br />abundance:  56","date: 2006-06-16<br />n_species: 27<br />abundance: 138","date: 2006-06-18<br />n_species: 19<br />abundance: 133","date: 2006-06-20<br />n_species: 47<br />abundance: 886","date: 2006-07-15<br />n_species: 16<br />abundance:  37","date: 2006-07-18<br />n_species: 26<br />abundance:  80","date: 2006-07-19<br />n_species: 19<br />abundance:  66","date: 2006-07-20<br />n_species: 23<br />abundance:  72","date: 2006-08-15<br />n_species: 20<br />abundance:  45","date: 2006-08-20<br />n_species: 24<br />abundance: 181","date: 2006-08-21<br />n_species: 15<br />abundance:  51","date: 2006-09-08<br />n_species: 12<br />abundance:  29","date: 2006-09-16<br />n_species: 22<br />abundance:  67","date: 2006-09-20<br />n_species: 22<br />abundance: 115","date: 2006-10-07<br />n_species: 24<br />abundance:  52","date: 2006-10-09<br />n_species: 22<br />abundance:  52","date: 2006-10-10<br />n_species: 29<br />abundance: 127","date: 2006-10-12<br />n_species: 26<br />abundance:  97","date: 2006-10-13<br />n_species: 23<br />abundance: 152","date: 2006-10-29<br />n_species: 30<br />abundance: 133","date: 2006-10-31<br />n_species: 47<br />abundance: 273","date: 2006-11-01<br />n_species: 38<br />abundance: 192","date: 2007-06-15<br />n_species: 23<br />abundance:  89","date: 2007-06-16<br />n_species: 21<br />abundance:  64","date: 2007-06-20<br />n_species: 27<br />abundance:  83","date: 2007-07-17<br />n_species: 17<br />abundance:  37","date: 2007-07-21<br />n_species: 16<br />abundance:  35","date: 2007-09-15<br />n_species: 29<br />abundance: 129","date: 2007-09-17<br />n_species: 33<br />abundance: 343","date: 2007-09-18<br />n_species: 26<br />abundance: 129","date: 2007-09-20<br />n_species: 25<br />abundance:  94","date: 2007-10-06<br />n_species: 29<br />abundance:  75","date: 2007-10-08<br />n_species: 30<br />abundance: 160","date: 2007-10-11<br />n_species: 20<br />abundance:  65","date: 2008-06-17<br />n_species: 32<br />abundance: 128","date: 2008-06-20<br />n_species: 41<br />abundance: 780","date: 2008-06-21<br />n_species: 36<br />abundance: 173","date: 2008-10-11<br />n_species: 23<br />abundance:  77","date: 2008-10-15<br />n_species: 11<br />abundance:  26","date: 2008-10-16<br />n_species: 16<br />abundance:  77","date: 2012-06-10<br />n_species: 26<br />abundance:  79","date: 2012-07-16<br />n_species: 15<br />abundance:  24","date: 2012-07-17<br />n_species: 12<br />abundance:  21","date: 2012-08-23<br />n_species:  5<br />abundance:   8","date: 2012-08-25<br />n_species: 10<br />abundance:  26","date: 2012-10-12<br />n_species: 21<br />abundance:  57","date: 2012-10-13<br />n_species: 23<br />abundance:  55","date: 2012-10-14<br />n_species: 21<br />abundance:  57","date: 2012-10-27<br />n_species: 31<br />abundance:  87","date: 2013-05-18<br />n_species: 25<br />abundance: 116","date: 2013-05-19<br />n_species: 21<br />abundance:  79","date: 2013-06-04<br />n_species: 28<br />abundance: 127","date: 2013-06-05<br />n_species: 29<br />abundance:  88","date: 2013-07-13<br />n_species: 18<br />abundance:  54","date: 2013-08-17<br />n_species: 21<br />abundance:  50","date: 2013-09-22<br />n_species: 25<br />abundance:  50","date: 2013-10-13<br />n_species: 19<br />abundance:  64","date: 2005-05-17<br />n_species: 15<br />abundance:  52","date: 2005-05-18<br />n_species: 41<br />abundance: 134","date: 2005-06-17<br />n_species: 17<br />abundance:  53","date: 2005-06-19<br />n_species: 35<br />abundance:  95","date: 2005-06-21<br />n_species: 28<br />abundance: 106","date: 2005-07-16<br />n_species: 23<br />abundance:  68","date: 2005-07-17<br />n_species: 22<br />abundance:  37","date: 2005-07-18<br />n_species: 25<br />abundance:  53","date: 2005-07-19<br />n_species: 17<br />abundance:  40","date: 2005-08-18<br />n_species: 15<br />abundance:  34","date: 2005-08-19<br />n_species: 16<br />abundance:  23","date: 2005-08-20<br />n_species: 20<br />abundance:  46","date: 2005-09-17<br />n_species: 18<br />abundance:  31","date: 2005-09-20<br />n_species: 11<br />abundance:  25","date: 2005-09-21<br />n_species: 10<br />abundance:  27","date: 2005-09-22<br />n_species: 11<br />abundance:  27","date: 2005-10-09<br />n_species: 32<br />abundance:  90","date: 2005-10-31<br />n_species:  6<br />abundance:  11","date: 2005-11-01<br />n_species:  7<br />abundance:  15","date: 2005-11-04<br />n_species: 16<br />abundance:  23","date: 2006-06-19<br />n_species: 26<br />abundance:  52","date: 2006-06-20<br />n_species: 27<br />abundance: 108","date: 2006-06-22<br />n_species: 26<br />abundance:  58","date: 2006-07-19<br />n_species: 39<br />abundance: 190","date: 2006-07-20<br />n_species: 17<br />abundance:  50","date: 2006-08-19<br />n_species: 15<br />abundance:  49","date: 2006-08-20<br />n_species: 21<br />abundance:  47","date: 2006-08-21<br />n_species: 26<br />abundance:  77","date: 2006-09-18<br />n_species: 27<br />abundance: 122","date: 2006-10-09<br />n_species: 13<br />abundance:  52","date: 2006-10-10<br />n_species: 41<br />abundance: 130","date: 2006-11-01<br />n_species: 33<br />abundance: 118","date: 2007-06-19<br />n_species: 16<br />abundance:  26","date: 2007-06-20<br />n_species: 23<br />abundance:  90","date: 2007-07-19<br />n_species: 31<br />abundance:  63","date: 2007-07-20<br />n_species:  6<br />abundance:  22","date: 2007-07-23<br />n_species: 30<br />abundance:  47","date: 2007-09-17<br />n_species: 27<br />abundance:  66","date: 2007-09-20<br />n_species: 33<br />abundance:  84","date: 2007-10-08<br />n_species: 41<br />abundance: 116","date: 2007-10-11<br />n_species: 14<br />abundance:  64","date: 2008-10-13<br />n_species: 21<br />abundance:  96","date: 2008-10-16<br />n_species: 40<br />abundance: 147","date: 2012-07-16<br />n_species: 29<br />abundance:  61","date: 2012-07-17<br />n_species: 26<br />abundance:  63","date: 2012-07-19<br />n_species: 29<br />abundance:  61","date: 2012-08-23<br />n_species: 19<br />abundance:  36","date: 2012-09-23<br />n_species: 18<br />abundance:  42","date: 2012-10-13<br />n_species: 16<br />abundance:  50","date: 2012-10-14<br />n_species: 19<br />abundance:  64","date: 2012-10-27<br />n_species: 24<br />abundance:  96","date: 2013-05-18<br />n_species: 46<br />abundance: 218","date: 2013-05-19<br />n_species: 45<br />abundance: 156","date: 2013-06-03<br />n_species: 38<br />abundance: 203","date: 2013-07-13<br />n_species: 30<br />abundance: 131","date: 2013-08-17<br />n_species: 41<br />abundance:  82","date: 2013-09-22<br />n_species: 35<br />abundance: 120","date: 2013-10-13<br />n_species: 48<br />abundance: 170","date: 2005-09-21<br />n_species:  4<br />abundance:  10","date: 2005-10-11<br />n_species:  9<br />abundance:  27","date: 2006-06-17<br />n_species:  6<br />abundance:  36","date: 2006-07-16<br />n_species:  7<br />abundance:  20","date: 2006-08-21<br />n_species:  4<br />abundance:   7","date: 2006-09-17<br />n_species:  6<br />abundance:  22","date: 2006-09-19<br />n_species:  7<br />abundance:  25","date: 2006-10-08<br />n_species:  7<br />abundance:  31","date: 2006-10-11<br />n_species:  6<br />abundance:  17","date: 2006-10-30<br />n_species:  6<br />abundance:  15","date: 2007-06-21<br />n_species:  4<br />abundance:  21","date: 2007-09-16<br />n_species:  5<br />abundance:   8","date: 2007-10-07<br />n_species:  8<br />abundance:  25","date: 2008-06-20<br />n_species: 11<br />abundance:  32","date: 2008-10-12<br />n_species:  9<br />abundance:  55","date: 2008-10-13<br />n_species: 12<br />abundance:  70","date: 2012-07-15<br />n_species:  7<br />abundance:  15","date: 2012-07-16<br />n_species:  6<br />abundance:  25","date: 2012-07-17<br />n_species:  3<br />abundance:  22","date: 2012-07-18<br />n_species:  7<br />abundance:  21","date: 2012-08-22<br />n_species:  4<br />abundance:   7","date: 2012-10-13<br />n_species:  4<br />abundance:  45","date: 2012-10-14<br />n_species:  5<br />abundance:  71","date: 2012-10-27<br />n_species:  6<br />abundance:  23","date: 2013-05-18<br />n_species: 15<br />abundance:  69","date: 2013-06-02<br />n_species:  9<br />abundance:  65","date: 2013-08-18<br />n_species:  9<br />abundance:  15","date: 2013-09-21<br />n_species: 10<br />abundance:  22","date: 2013-09-22<br />n_species:  9<br />abundance:  17","date: 2013-10-12<br />n_species: 10<br />abundance: 134","date: 2007-06-21<br />n_species: 27<br />abundance:  68"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(79,148,183,1)","rgba(66,142,186,1)","rgba(86,152,181,1)","rgba(90,155,180,1)","rgba(67,142,186,1)","rgba(74,146,184,1)","rgba(79,148,183,1)","rgba(68,143,186,1)","rgba(105,165,174,1)","rgba(121,179,167,1)","rgba(152,212,149,1)","rgba(81,150,182,1)","rgba(88,154,180,1)","rgba(82,150,182,1)","rgba(86,152,181,1)","rgba(87,153,181,1)","rgba(83,151,182,1)","rgba(80,149,183,1)","rgba(88,154,180,1)","rgba(118,176,169,1)","rgba(143,202,155,1)","rgba(81,149,182,1)","rgba(83,151,182,1)","rgba(102,164,175,1)","rgba(131,188,162,1)","rgba(125,182,165,1)","rgba(98,160,177,1)","rgba(130,187,163,1)","rgba(107,167,174,1)","rgba(92,156,179,1)","rgba(108,168,173,1)","rgba(80,149,183,1)","rgba(58,139,188,1)","rgba(77,147,183,1)","rgba(70,144,185,1)","rgba(61,140,187,1)","rgba(67,142,186,1)","rgba(71,144,185,1)","rgba(74,146,184,1)","rgba(67,142,186,1)","rgba(60,139,187,1)","rgba(70,144,185,1)","rgba(60,139,187,1)","rgba(63,141,187,1)","rgba(80,149,183,1)","rgba(56,138,188,1)","rgba(85,152,181,1)","rgba(75,146,184,1)","rgba(77,147,183,1)","rgba(87,153,180,1)","rgba(78,148,183,1)","rgba(66,142,186,1)","rgba(80,149,183,1)","rgba(109,168,173,1)","rgba(98,160,177,1)","rgba(98,160,177,1)","rgba(66,142,186,1)","rgba(76,147,184,1)","rgba(97,160,177,1)","rgba(92,156,179,1)","rgba(110,170,172,1)","rgba(95,158,178,1)","rgba(114,172,171,1)","rgba(74,146,184,1)","rgba(75,146,184,1)","rgba(94,157,178,1)","rgba(110,170,172,1)","rgba(105,165,174,1)","rgba(100,162,176,1)","rgba(119,177,168,1)","rgba(212,237,151,1)","rgba(135,193,160,1)","rgba(95,158,178,1)","rgba(105,166,174,1)","rgba(66,142,186,1)","rgba(66,142,186,1)","rgba(71,144,185,1)","rgba(73,145,184,1)","rgba(66,142,186,1)","rgba(58,139,188,1)","rgba(113,172,171,1)","rgba(85,152,181,1)","rgba(99,161,177,1)","rgba(91,156,179,1)","rgba(96,159,178,1)","rgba(97,160,177,1)","rgba(91,156,179,1)","rgba(110,169,172,1)","rgba(112,171,171,1)","rgba(87,153,181,1)","rgba(97,160,177,1)","rgba(83,151,182,1)","rgba(102,163,175,1)","rgba(74,146,184,1)","rgba(70,144,185,1)","rgba(76,147,184,1)","rgba(68,143,186,1)","rgba(74,146,184,1)","rgba(64,141,186,1)","rgba(81,149,182,1)","rgba(86,152,181,1)","rgba(96,159,178,1)","rgba(70,144,185,1)","rgba(87,153,181,1)","rgba(81,149,182,1)","rgba(87,153,181,1)","rgba(79,148,183,1)","rgba(93,157,179,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(89,154,180,1)","rgba(114,173,170,1)","rgba(117,175,169,1)","rgba(78,148,183,1)","rgba(71,144,185,1)","rgba(110,169,172,1)","rgba(150,209,150,1)","rgba(97,160,177,1)","rgba(109,168,173,1)","rgba(73,145,184,1)","rgba(138,196,158,1)","rgba(104,165,175,1)","rgba(91,156,179,1)","rgba(56,138,188,1)","rgba(69,143,185,1)","rgba(68,143,186,1)","rgba(57,138,188,1)","rgba(54,137,188,1)","rgba(64,141,186,1)","rgba(62,140,187,1)","rgba(56,138,188,1)","rgba(64,141,186,1)","rgba(73,145,184,1)","rgba(51,136,189,1)","rgba(60,139,187,1)","rgba(62,140,187,1)","rgba(63,141,187,1)","rgba(62,140,187,1)","rgba(101,163,176,1)","rgba(89,154,180,1)","rgba(82,150,182,1)","rgba(75,146,184,1)","rgba(79,148,183,1)","rgba(80,149,183,1)","rgba(75,146,184,1)","rgba(78,148,183,1)","rgba(57,138,188,1)","rgba(97,160,177,1)","rgba(57,138,188,1)","rgba(97,160,177,1)","rgba(83,151,182,1)","rgba(83,151,182,1)","rgba(97,160,177,1)","rgba(100,162,176,1)","rgba(74,146,184,1)","rgba(81,149,182,1)","rgba(76,147,184,1)","rgba(119,177,168,1)","rgba(100,162,176,1)","rgba(102,163,175,1)","rgba(227,244,152,1)","rgba(171,220,149,1)","rgba(90,155,180,1)","rgba(101,163,176,1)","rgba(84,151,181,1)","rgba(99,161,177,1)","rgba(79,148,183,1)","rgba(82,150,182,1)","rgba(67,142,186,1)","rgba(92,156,179,1)","rgba(91,156,179,1)","rgba(104,165,175,1)","rgba(90,155,180,1)","rgba(111,170,172,1)","rgba(92,156,179,1)","rgba(107,167,174,1)","rgba(105,165,174,1)","rgba(122,180,166,1)","rgba(125,182,165,1)","rgba(87,153,180,1)","rgba(107,167,174,1)","rgba(109,168,173,1)","rgba(81,149,182,1)","rgba(121,179,167,1)","rgba(69,143,185,1)","rgba(64,141,186,1)","rgba(67,142,186,1)","rgba(73,145,184,1)","rgba(62,140,187,1)","rgba(66,142,186,1)","rgba(82,150,182,1)","rgba(71,144,185,1)","rgba(87,153,180,1)","rgba(74,146,184,1)","rgba(69,143,185,1)","rgba(85,152,181,1)","rgba(74,146,184,1)","rgba(80,149,183,1)","rgba(117,175,169,1)","rgba(103,164,175,1)","rgba(76,147,184,1)","rgba(70,144,185,1)","rgba(105,166,174,1)","rgba(121,179,167,1)","rgba(88,154,180,1)","rgba(95,158,178,1)","rgba(87,153,180,1)","rgba(90,155,180,1)","rgba(66,142,186,1)","rgba(99,161,177,1)","rgba(87,153,181,1)","rgba(63,141,187,1)","rgba(66,142,186,1)","rgba(51,136,189,1)","rgba(64,141,186,1)","rgba(63,141,187,1)","rgba(54,137,188,1)","rgba(57,138,188,1)","rgba(64,141,186,1)","rgba(58,139,188,1)","rgba(81,149,182,1)","rgba(66,142,186,1)","rgba(50,136,189,1)","rgba(70,144,185,1)","rgba(82,150,182,1)","rgba(71,144,185,1)","rgba(51,136,189,1)","rgba(121,179,167,1)","rgba(76,147,184,1)","rgba(106,166,174,1)","rgba(110,169,172,1)","rgba(105,165,174,1)","rgba(83,151,182,1)","rgba(81,150,182,1)","rgba(75,146,184,1)","rgba(73,145,184,1)","rgba(89,154,180,1)","rgba(77,147,183,1)","rgba(90,155,180,1)","rgba(112,171,171,1)","rgba(115,173,170,1)","rgba(130,187,163,1)","rgba(103,164,175,1)","rgba(105,165,174,1)","rgba(81,150,182,1)","rgba(141,199,156,1)","rgba(108,168,173,1)","rgba(103,164,175,1)","rgba(196,231,150,1)","rgba(119,177,168,1)","rgba(129,187,163,1)","rgba(127,185,164,1)","rgba(193,229,150,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(84,151,181,1)","rgba(114,172,171,1)","rgba(98,161,177,1)","rgba(93,157,179,1)","rgba(123,181,166,1)","rgba(95,158,178,1)","rgba(160,216,148,1)","rgba(148,207,152,1)","rgba(185,226,150,1)","rgba(118,177,168,1)","rgba(120,178,168,1)","rgba(84,151,181,1)","rgba(93,157,179,1)","rgba(138,196,158,1)","rgba(88,154,180,1)","rgba(100,162,176,1)","rgba(99,161,177,1)","rgba(113,172,171,1)","rgba(95,158,178,1)","rgba(91,156,179,1)","rgba(127,185,164,1)","rgba(115,174,170,1)","rgba(118,176,169,1)","rgba(102,163,175,1)","rgba(95,158,178,1)","rgba(95,158,178,1)","rgba(110,170,172,1)","rgba(215,239,151,1)","rgba(149,208,151,1)","rgba(125,183,165,1)","rgba(139,197,157,1)","rgba(136,194,159,1)","rgba(167,219,149,1)","rgba(202,233,151,1)","rgba(165,218,149,1)","rgba(137,195,159,1)","rgba(124,181,166,1)","rgba(111,170,172,1)","rgba(130,188,162,1)","rgba(196,230,150,1)","rgba(216,239,151,1)","rgba(157,214,148,1)","rgba(171,220,149,1)","rgba(108,168,173,1)","rgba(104,165,175,1)","rgba(140,198,157,1)","rgba(140,199,156,1)","rgba(138,196,158,1)","rgba(158,215,148,1)","rgba(133,191,161,1)","rgba(92,156,179,1)","rgba(82,150,182,1)","rgba(89,154,180,1)","rgba(109,168,173,1)","rgba(97,160,177,1)","rgba(90,155,180,1)","rgba(106,166,174,1)","rgba(102,163,175,1)","rgba(111,170,172,1)","rgba(96,159,178,1)","rgba(117,175,169,1)","rgba(120,178,168,1)","rgba(104,165,175,1)","rgba(105,166,174,1)","rgba(107,167,174,1)","rgba(100,162,176,1)","rgba(100,162,176,1)","rgba(116,175,170,1)","rgba(102,164,175,1)","rgba(148,207,151,1)","rgba(146,205,153,1)","rgba(213,62,79,1)","rgba(88,154,180,1)","rgba(118,176,169,1)","rgba(109,169,173,1)","rgba(113,172,171,1)","rgba(95,158,178,1)","rgba(171,220,149,1)","rgba(99,161,177,1)","rgba(81,150,182,1)","rgba(110,169,172,1)","rgba(137,195,159,1)","rgba(100,162,176,1)","rgba(100,162,176,1)","rgba(143,201,155,1)","rgba(127,185,164,1)","rgba(155,214,148,1)","rgba(146,205,153,1)","rgba(218,240,151,1)","rgba(177,222,149,1)","rgba(123,181,166,1)","rgba(108,168,173,1)","rgba(120,178,168,1)","rgba(88,154,180,1)","rgba(87,153,181,1)","rgba(144,202,154,1)","rgba(238,248,164,1)","rgba(144,202,154,1)","rgba(126,184,165,1)","rgba(115,173,170,1)","rgba(159,216,148,1)","rgba(109,168,173,1)","rgba(143,202,155,1)","rgba(241,120,86,1)","rgba(166,218,149,1)","rgba(116,175,170,1)","rgba(79,148,183,1)","rgba(116,175,170,1)","rgba(117,176,169,1)","rgba(77,147,183,1)","rgba(74,146,184,1)","rgba(60,139,187,1)","rgba(79,148,183,1)","rgba(103,164,175,1)","rgba(102,163,175,1)","rgba(103,164,175,1)","rgba(122,180,167,1)","rgba(137,195,158,1)","rgba(117,176,169,1)","rgba(143,201,155,1)","rgba(122,180,166,1)","rgba(101,163,176,1)","rgba(98,161,177,1)","rgba(98,161,177,1)","rgba(108,168,173,1)","rgba(100,162,176,1)","rgba(146,205,153,1)","rgba(100,162,176,1)","rgba(126,184,164,1)","rgba(132,190,161,1)","rgba(110,170,172,1)","rgba(88,154,180,1)","rgba(100,162,176,1)","rgba(91,155,179,1)","rgba(86,152,181,1)","rgba(76,147,184,1)","rgba(95,158,178,1)","rgba(83,151,182,1)","rgba(78,148,183,1)","rgba(80,149,183,1)","rgba(80,149,183,1)","rgba(124,181,166,1)","rgba(63,141,187,1)","rgba(68,143,186,1)","rgba(76,147,184,1)","rgba(100,162,176,1)","rgba(133,191,161,1)","rgba(104,165,175,1)","rgba(175,222,149,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(96,159,178,1)","rgba(116,175,170,1)","rgba(140,199,156,1)","rgba(100,162,176,1)","rgba(144,203,154,1)","rgba(138,196,158,1)","rgba(79,148,183,1)","rgba(124,181,166,1)","rgba(107,167,173,1)","rgba(75,146,184,1)","rgba(96,159,178,1)","rgba(109,169,173,1)","rgba(120,178,168,1)","rgba(137,195,158,1)","rgba(108,168,173,1)","rgba(127,185,164,1)","rgba(152,212,148,1)","rgba(106,166,174,1)","rgba(107,167,173,1)","rgba(106,166,174,1)","rgba(87,153,180,1)","rgba(92,156,179,1)","rgba(98,161,177,1)","rgba(108,168,173,1)","rgba(127,185,164,1)","rgba(190,228,150,1)","rgba(157,215,148,1)","rgba(182,225,150,1)","rgba(145,203,154,1)","rgba(119,177,168,1)","rgba(139,197,157,1)","rgba(165,218,149,1)","rgba(62,140,187,1)","rgba(80,149,183,1)","rgba(87,153,180,1)","rgba(73,145,184,1)","rgba(58,139,188,1)","rgba(75,146,184,1)","rgba(78,148,183,1)","rgba(83,151,182,1)","rgba(70,144,185,1)","rgba(68,143,186,1)","rgba(74,146,184,1)","rgba(60,139,187,1)","rgba(78,148,183,1)","rgba(84,151,181,1)","rgba(102,163,175,1)","rgba(112,171,171,1)","rgba(68,143,186,1)","rgba(78,148,183,1)","rgba(75,146,184,1)","rgba(74,146,184,1)","rgba(58,139,188,1)","rgba(95,158,178,1)","rgba(112,171,171,1)","rgba(76,147,184,1)","rgba(111,170,172,1)","rgba(109,168,173,1)","rgba(68,143,186,1)","rgba(75,146,184,1)","rgba(70,144,185,1)","rgba(146,205,153,1)","rgba(110,170,172,1)"],"opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":["rgba(79,148,183,1)","rgba(66,142,186,1)","rgba(86,152,181,1)","rgba(90,155,180,1)","rgba(67,142,186,1)","rgba(74,146,184,1)","rgba(79,148,183,1)","rgba(68,143,186,1)","rgba(105,165,174,1)","rgba(121,179,167,1)","rgba(152,212,149,1)","rgba(81,150,182,1)","rgba(88,154,180,1)","rgba(82,150,182,1)","rgba(86,152,181,1)","rgba(87,153,181,1)","rgba(83,151,182,1)","rgba(80,149,183,1)","rgba(88,154,180,1)","rgba(118,176,169,1)","rgba(143,202,155,1)","rgba(81,149,182,1)","rgba(83,151,182,1)","rgba(102,164,175,1)","rgba(131,188,162,1)","rgba(125,182,165,1)","rgba(98,160,177,1)","rgba(130,187,163,1)","rgba(107,167,174,1)","rgba(92,156,179,1)","rgba(108,168,173,1)","rgba(80,149,183,1)","rgba(58,139,188,1)","rgba(77,147,183,1)","rgba(70,144,185,1)","rgba(61,140,187,1)","rgba(67,142,186,1)","rgba(71,144,185,1)","rgba(74,146,184,1)","rgba(67,142,186,1)","rgba(60,139,187,1)","rgba(70,144,185,1)","rgba(60,139,187,1)","rgba(63,141,187,1)","rgba(80,149,183,1)","rgba(56,138,188,1)","rgba(85,152,181,1)","rgba(75,146,184,1)","rgba(77,147,183,1)","rgba(87,153,180,1)","rgba(78,148,183,1)","rgba(66,142,186,1)","rgba(80,149,183,1)","rgba(109,168,173,1)","rgba(98,160,177,1)","rgba(98,160,177,1)","rgba(66,142,186,1)","rgba(76,147,184,1)","rgba(97,160,177,1)","rgba(92,156,179,1)","rgba(110,170,172,1)","rgba(95,158,178,1)","rgba(114,172,171,1)","rgba(74,146,184,1)","rgba(75,146,184,1)","rgba(94,157,178,1)","rgba(110,170,172,1)","rgba(105,165,174,1)","rgba(100,162,176,1)","rgba(119,177,168,1)","rgba(212,237,151,1)","rgba(135,193,160,1)","rgba(95,158,178,1)","rgba(105,166,174,1)","rgba(66,142,186,1)","rgba(66,142,186,1)","rgba(71,144,185,1)","rgba(73,145,184,1)","rgba(66,142,186,1)","rgba(58,139,188,1)","rgba(113,172,171,1)","rgba(85,152,181,1)","rgba(99,161,177,1)","rgba(91,156,179,1)","rgba(96,159,178,1)","rgba(97,160,177,1)","rgba(91,156,179,1)","rgba(110,169,172,1)","rgba(112,171,171,1)","rgba(87,153,181,1)","rgba(97,160,177,1)","rgba(83,151,182,1)","rgba(102,163,175,1)","rgba(74,146,184,1)","rgba(70,144,185,1)","rgba(76,147,184,1)","rgba(68,143,186,1)","rgba(74,146,184,1)","rgba(64,141,186,1)","rgba(81,149,182,1)","rgba(86,152,181,1)","rgba(96,159,178,1)","rgba(70,144,185,1)","rgba(87,153,181,1)","rgba(81,149,182,1)","rgba(87,153,181,1)","rgba(79,148,183,1)","rgba(93,157,179,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(89,154,180,1)","rgba(114,173,170,1)","rgba(117,175,169,1)","rgba(78,148,183,1)","rgba(71,144,185,1)","rgba(110,169,172,1)","rgba(150,209,150,1)","rgba(97,160,177,1)","rgba(109,168,173,1)","rgba(73,145,184,1)","rgba(138,196,158,1)","rgba(104,165,175,1)","rgba(91,156,179,1)","rgba(56,138,188,1)","rgba(69,143,185,1)","rgba(68,143,186,1)","rgba(57,138,188,1)","rgba(54,137,188,1)","rgba(64,141,186,1)","rgba(62,140,187,1)","rgba(56,138,188,1)","rgba(64,141,186,1)","rgba(73,145,184,1)","rgba(51,136,189,1)","rgba(60,139,187,1)","rgba(62,140,187,1)","rgba(63,141,187,1)","rgba(62,140,187,1)","rgba(101,163,176,1)","rgba(89,154,180,1)","rgba(82,150,182,1)","rgba(75,146,184,1)","rgba(79,148,183,1)","rgba(80,149,183,1)","rgba(75,146,184,1)","rgba(78,148,183,1)","rgba(57,138,188,1)","rgba(97,160,177,1)","rgba(57,138,188,1)","rgba(97,160,177,1)","rgba(83,151,182,1)","rgba(83,151,182,1)","rgba(97,160,177,1)","rgba(100,162,176,1)","rgba(74,146,184,1)","rgba(81,149,182,1)","rgba(76,147,184,1)","rgba(119,177,168,1)","rgba(100,162,176,1)","rgba(102,163,175,1)","rgba(227,244,152,1)","rgba(171,220,149,1)","rgba(90,155,180,1)","rgba(101,163,176,1)","rgba(84,151,181,1)","rgba(99,161,177,1)","rgba(79,148,183,1)","rgba(82,150,182,1)","rgba(67,142,186,1)","rgba(92,156,179,1)","rgba(91,156,179,1)","rgba(104,165,175,1)","rgba(90,155,180,1)","rgba(111,170,172,1)","rgba(92,156,179,1)","rgba(107,167,174,1)","rgba(105,165,174,1)","rgba(122,180,166,1)","rgba(125,182,165,1)","rgba(87,153,180,1)","rgba(107,167,174,1)","rgba(109,168,173,1)","rgba(81,149,182,1)","rgba(121,179,167,1)","rgba(69,143,185,1)","rgba(64,141,186,1)","rgba(67,142,186,1)","rgba(73,145,184,1)","rgba(62,140,187,1)","rgba(66,142,186,1)","rgba(82,150,182,1)","rgba(71,144,185,1)","rgba(87,153,180,1)","rgba(74,146,184,1)","rgba(69,143,185,1)","rgba(85,152,181,1)","rgba(74,146,184,1)","rgba(80,149,183,1)","rgba(117,175,169,1)","rgba(103,164,175,1)","rgba(76,147,184,1)","rgba(70,144,185,1)","rgba(105,166,174,1)","rgba(121,179,167,1)","rgba(88,154,180,1)","rgba(95,158,178,1)","rgba(87,153,180,1)","rgba(90,155,180,1)","rgba(66,142,186,1)","rgba(99,161,177,1)","rgba(87,153,181,1)","rgba(63,141,187,1)","rgba(66,142,186,1)","rgba(51,136,189,1)","rgba(64,141,186,1)","rgba(63,141,187,1)","rgba(54,137,188,1)","rgba(57,138,188,1)","rgba(64,141,186,1)","rgba(58,139,188,1)","rgba(81,149,182,1)","rgba(66,142,186,1)","rgba(50,136,189,1)","rgba(70,144,185,1)","rgba(82,150,182,1)","rgba(71,144,185,1)","rgba(51,136,189,1)","rgba(121,179,167,1)","rgba(76,147,184,1)","rgba(106,166,174,1)","rgba(110,169,172,1)","rgba(105,165,174,1)","rgba(83,151,182,1)","rgba(81,150,182,1)","rgba(75,146,184,1)","rgba(73,145,184,1)","rgba(89,154,180,1)","rgba(77,147,183,1)","rgba(90,155,180,1)","rgba(112,171,171,1)","rgba(115,173,170,1)","rgba(130,187,163,1)","rgba(103,164,175,1)","rgba(105,165,174,1)","rgba(81,150,182,1)","rgba(141,199,156,1)","rgba(108,168,173,1)","rgba(103,164,175,1)","rgba(196,231,150,1)","rgba(119,177,168,1)","rgba(129,187,163,1)","rgba(127,185,164,1)","rgba(193,229,150,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(84,151,181,1)","rgba(114,172,171,1)","rgba(98,161,177,1)","rgba(93,157,179,1)","rgba(123,181,166,1)","rgba(95,158,178,1)","rgba(160,216,148,1)","rgba(148,207,152,1)","rgba(185,226,150,1)","rgba(118,177,168,1)","rgba(120,178,168,1)","rgba(84,151,181,1)","rgba(93,157,179,1)","rgba(138,196,158,1)","rgba(88,154,180,1)","rgba(100,162,176,1)","rgba(99,161,177,1)","rgba(113,172,171,1)","rgba(95,158,178,1)","rgba(91,156,179,1)","rgba(127,185,164,1)","rgba(115,174,170,1)","rgba(118,176,169,1)","rgba(102,163,175,1)","rgba(95,158,178,1)","rgba(95,158,178,1)","rgba(110,170,172,1)","rgba(215,239,151,1)","rgba(149,208,151,1)","rgba(125,183,165,1)","rgba(139,197,157,1)","rgba(136,194,159,1)","rgba(167,219,149,1)","rgba(202,233,151,1)","rgba(165,218,149,1)","rgba(137,195,159,1)","rgba(124,181,166,1)","rgba(111,170,172,1)","rgba(130,188,162,1)","rgba(196,230,150,1)","rgba(216,239,151,1)","rgba(157,214,148,1)","rgba(171,220,149,1)","rgba(108,168,173,1)","rgba(104,165,175,1)","rgba(140,198,157,1)","rgba(140,199,156,1)","rgba(138,196,158,1)","rgba(158,215,148,1)","rgba(133,191,161,1)","rgba(92,156,179,1)","rgba(82,150,182,1)","rgba(89,154,180,1)","rgba(109,168,173,1)","rgba(97,160,177,1)","rgba(90,155,180,1)","rgba(106,166,174,1)","rgba(102,163,175,1)","rgba(111,170,172,1)","rgba(96,159,178,1)","rgba(117,175,169,1)","rgba(120,178,168,1)","rgba(104,165,175,1)","rgba(105,166,174,1)","rgba(107,167,174,1)","rgba(100,162,176,1)","rgba(100,162,176,1)","rgba(116,175,170,1)","rgba(102,164,175,1)","rgba(148,207,151,1)","rgba(146,205,153,1)","rgba(213,62,79,1)","rgba(88,154,180,1)","rgba(118,176,169,1)","rgba(109,169,173,1)","rgba(113,172,171,1)","rgba(95,158,178,1)","rgba(171,220,149,1)","rgba(99,161,177,1)","rgba(81,150,182,1)","rgba(110,169,172,1)","rgba(137,195,159,1)","rgba(100,162,176,1)","rgba(100,162,176,1)","rgba(143,201,155,1)","rgba(127,185,164,1)","rgba(155,214,148,1)","rgba(146,205,153,1)","rgba(218,240,151,1)","rgba(177,222,149,1)","rgba(123,181,166,1)","rgba(108,168,173,1)","rgba(120,178,168,1)","rgba(88,154,180,1)","rgba(87,153,181,1)","rgba(144,202,154,1)","rgba(238,248,164,1)","rgba(144,202,154,1)","rgba(126,184,165,1)","rgba(115,173,170,1)","rgba(159,216,148,1)","rgba(109,168,173,1)","rgba(143,202,155,1)","rgba(241,120,86,1)","rgba(166,218,149,1)","rgba(116,175,170,1)","rgba(79,148,183,1)","rgba(116,175,170,1)","rgba(117,176,169,1)","rgba(77,147,183,1)","rgba(74,146,184,1)","rgba(60,139,187,1)","rgba(79,148,183,1)","rgba(103,164,175,1)","rgba(102,163,175,1)","rgba(103,164,175,1)","rgba(122,180,167,1)","rgba(137,195,158,1)","rgba(117,176,169,1)","rgba(143,201,155,1)","rgba(122,180,166,1)","rgba(101,163,176,1)","rgba(98,161,177,1)","rgba(98,161,177,1)","rgba(108,168,173,1)","rgba(100,162,176,1)","rgba(146,205,153,1)","rgba(100,162,176,1)","rgba(126,184,164,1)","rgba(132,190,161,1)","rgba(110,170,172,1)","rgba(88,154,180,1)","rgba(100,162,176,1)","rgba(91,155,179,1)","rgba(86,152,181,1)","rgba(76,147,184,1)","rgba(95,158,178,1)","rgba(83,151,182,1)","rgba(78,148,183,1)","rgba(80,149,183,1)","rgba(80,149,183,1)","rgba(124,181,166,1)","rgba(63,141,187,1)","rgba(68,143,186,1)","rgba(76,147,184,1)","rgba(100,162,176,1)","rgba(133,191,161,1)","rgba(104,165,175,1)","rgba(175,222,149,1)","rgba(98,161,177,1)","rgba(98,160,177,1)","rgba(96,159,178,1)","rgba(116,175,170,1)","rgba(140,199,156,1)","rgba(100,162,176,1)","rgba(144,203,154,1)","rgba(138,196,158,1)","rgba(79,148,183,1)","rgba(124,181,166,1)","rgba(107,167,173,1)","rgba(75,146,184,1)","rgba(96,159,178,1)","rgba(109,169,173,1)","rgba(120,178,168,1)","rgba(137,195,158,1)","rgba(108,168,173,1)","rgba(127,185,164,1)","rgba(152,212,148,1)","rgba(106,166,174,1)","rgba(107,167,173,1)","rgba(106,166,174,1)","rgba(87,153,180,1)","rgba(92,156,179,1)","rgba(98,161,177,1)","rgba(108,168,173,1)","rgba(127,185,164,1)","rgba(190,228,150,1)","rgba(157,215,148,1)","rgba(182,225,150,1)","rgba(145,203,154,1)","rgba(119,177,168,1)","rgba(139,197,157,1)","rgba(165,218,149,1)","rgba(62,140,187,1)","rgba(80,149,183,1)","rgba(87,153,180,1)","rgba(73,145,184,1)","rgba(58,139,188,1)","rgba(75,146,184,1)","rgba(78,148,183,1)","rgba(83,151,182,1)","rgba(70,144,185,1)","rgba(68,143,186,1)","rgba(74,146,184,1)","rgba(60,139,187,1)","rgba(78,148,183,1)","rgba(84,151,181,1)","rgba(102,163,175,1)","rgba(112,171,171,1)","rgba(68,143,186,1)","rgba(78,148,183,1)","rgba(75,146,184,1)","rgba(74,146,184,1)","rgba(58,139,188,1)","rgba(95,158,178,1)","rgba(112,171,171,1)","rgba(76,147,184,1)","rgba(111,170,172,1)","rgba(109,168,173,1)","rgba(68,143,186,1)","rgba(75,146,184,1)","rgba(70,144,185,1)","rgba(146,205,153,1)","rgba(110,170,172,1)"]}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[12418],"y":[0],"name":"99_66ba62591dd2ffd65faa5bee8b31c644","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#3288BD"],[0.00334448160535117,"#3689BC"],[0.00668896321070234,"#3A8BBC"],[0.0100334448160535,"#3E8CBB"],[0.0133779264214047,"#418EBA"],[0.0167224080267559,"#458FB9"],[0.020066889632107,"#4891B9"],[0.0234113712374582,"#4B92B8"],[0.0267558528428094,"#4E94B7"],[0.0301003344481605,"#5095B6"],[0.0334448160535117,"#5397B6"],[0.0367892976588629,"#5598B5"],[0.040133779264214,"#589AB4"],[0.0434782608695652,"#5A9BB3"],[0.0468227424749164,"#5D9DB3"],[0.0501672240802676,"#5F9EB2"],[0.0535117056856187,"#61A0B1"],[0.0568561872909699,"#63A1B0"],[0.0602006688963211,"#65A3B0"],[0.0635451505016722,"#67A4AF"],[0.0668896321070234,"#69A6AE"],[0.0702341137123746,"#6BA7AD"],[0.0735785953177257,"#6DA9AD"],[0.0769230769230769,"#6FAAAC"],[0.0802675585284281,"#71ACAB"],[0.0836120401337793,"#73ADAA"],[0.0869565217391304,"#75AFA9"],[0.0903010033444816,"#76B1A8"],[0.0936454849498328,"#78B2A8"],[0.096989966555184,"#7AB4A7"],[0.100334448160535,"#7BB5A6"],[0.103678929765886,"#7DB7A5"],[0.107023411371237,"#7FB8A4"],[0.110367892976589,"#80BAA3"],[0.11371237458194,"#82BCA3"],[0.117056856187291,"#84BDA2"],[0.120401337792642,"#85BFA1"],[0.123745819397993,"#87C0A0"],[0.127090301003344,"#88C29F"],[0.130434782608696,"#8AC49E"],[0.133779264214047,"#8BC59D"],[0.137123745819398,"#8DC79C"],[0.140468227424749,"#8EC89B"],[0.1438127090301,"#90CA9B"],[0.147157190635451,"#91CC9A"],[0.150501672240803,"#92CD99"],[0.153846153846154,"#94CF98"],[0.157190635451505,"#95D097"],[0.160535117056856,"#97D296"],[0.163879598662207,"#98D495"],[0.167224080267559,"#99D594"],[0.17056856187291,"#9BD694"],[0.173913043478261,"#9DD694"],[0.177257525083612,"#9ED794"],[0.180602006688963,"#A0D894"],[0.183946488294314,"#A1D894"],[0.187290969899666,"#A3D995"],[0.190635451505017,"#A5DA95"],[0.193979933110368,"#A6DA95"],[0.197324414715719,"#A8DB95"],[0.20066889632107,"#A9DC95"],[0.204013377926421,"#ABDC95"],[0.207357859531773,"#ADDD95"],[0.210702341137124,"#AEDD95"],[0.214046822742475,"#B0DE95"],[0.217391304347826,"#B1DF95"],[0.220735785953177,"#B3DF95"],[0.224080267558528,"#B4E095"],[0.22742474916388,"#B6E196"],[0.230769230769231,"#B8E196"],[0.234113712374582,"#B9E296"],[0.237458193979933,"#BBE396"],[0.240802675585284,"#BCE396"],[0.244147157190635,"#BEE496"],[0.247491638795987,"#BFE596"],[0.250836120401338,"#C1E596"],[0.254180602006689,"#C2E696"],[0.25752508361204,"#C4E696"],[0.260869565217391,"#C5E796"],[0.264214046822742,"#C7E896"],[0.267558528428094,"#C8E897"],[0.270903010033445,"#CAE997"],[0.274247491638796,"#CBEA97"],[0.277591973244147,"#CDEA97"],[0.280936454849498,"#CFEB97"],[0.28428093645485,"#D0EC97"],[0.287625418060201,"#D2EC97"],[0.290969899665552,"#D3ED97"],[0.294314381270903,"#D5EE97"],[0.297658862876254,"#D6EE97"],[0.301003344481605,"#D8EF97"],[0.304347826086956,"#D9EF97"],[0.307692307692308,"#DBF097"],[0.311036789297659,"#DCF198"],[0.31438127090301,"#DEF198"],[0.317725752508361,"#DFF298"],[0.321070234113712,"#E1F398"],[0.324414715719064,"#E2F398"],[0.327759197324415,"#E4F498"],[0.331103678929766,"#E5F598"],[0.334448160535117,"#E6F598"],[0.337792642140468,"#E7F599"],[0.341137123745819,"#E7F59A"],[0.344481605351171,"#E8F69B"],[0.347826086956522,"#E8F69B"],[0.351170568561873,"#E9F69C"],[0.354515050167224,"#E9F69D"],[0.357859531772575,"#EAF69E"],[0.361204013377926,"#EAF79F"],[0.364548494983278,"#EBF79F"],[0.367892976588629,"#EBF7A0"],[0.37123745819398,"#ECF7A1"],[0.374581939799331,"#ECF7A2"],[0.377926421404682,"#EDF8A2"],[0.381270903010033,"#EDF8A3"],[0.384615384615385,"#EEF8A4"],[0.387959866220736,"#EEF8A5"],[0.391304347826087,"#EFF8A6"],[0.394648829431438,"#EFF9A6"],[0.397993311036789,"#F0F9A7"],[0.40133779264214,"#F0F9A8"],[0.404682274247492,"#F1F9A9"],[0.408026755852843,"#F1FAAA"],[0.411371237458194,"#F2FAAA"],[0.414715719063545,"#F2FAAB"],[0.418060200668896,"#F3FAAC"],[0.421404682274247,"#F3FAAD"],[0.424749163879599,"#F4FBAD"],[0.42809364548495,"#F4FBAE"],[0.431438127090301,"#F5FBAF"],[0.434782608695652,"#F5FBB0"],[0.438127090301003,"#F6FBB1"],[0.441471571906355,"#F6FCB1"],[0.444816053511706,"#F7FCB2"],[0.448160535117057,"#F7FCB3"],[0.451505016722408,"#F8FCB4"],[0.454849498327759,"#F8FCB4"],[0.45819397993311,"#F9FDB5"],[0.461538461538462,"#F9FDB6"],[0.464882943143813,"#FAFDB7"],[0.468227424749164,"#FAFDB8"],[0.471571906354515,"#FBFDB8"],[0.474916387959866,"#FBFEB9"],[0.478260869565217,"#FCFEBA"],[0.481605351170569,"#FCFEBB"],[0.48494983277592,"#FDFEBB"],[0.488294314381271,"#FDFEBC"],[0.491638795986622,"#FEFFBD"],[0.494983277591973,"#FEFFBE"],[0.498327759197324,"#FFFFBF"],[0.501672240802676,"#FFFFBE"],[0.505016722408027,"#FFFEBD"],[0.508361204013378,"#FFFDBC"],[0.511705685618729,"#FFFDBB"],[0.51505016722408,"#FFFCBA"],[0.518394648829431,"#FFFCB9"],[0.521739130434783,"#FFFBB8"],[0.525083612040134,"#FFFAB7"],[0.528428093645485,"#FFFAB6"],[0.531772575250836,"#FFF9B5"],[0.535117056856187,"#FFF8B4"],[0.538461538461538,"#FFF8B3"],[0.54180602006689,"#FFF7B2"],[0.545150501672241,"#FFF7B1"],[0.548494983277592,"#FFF6B0"],[0.551839464882943,"#FFF5AF"],[0.555183946488294,"#FFF5AE"],[0.558528428093645,"#FFF4AD"],[0.561872909698997,"#FFF3AC"],[0.565217391304348,"#FFF3AB"],[0.568561872909699,"#FFF2AA"],[0.57190635451505,"#FFF2A9"],[0.575250836120401,"#FFF1A7"],[0.578595317725752,"#FFF0A6"],[0.581939799331104,"#FFF0A5"],[0.585284280936455,"#FFEFA4"],[0.588628762541806,"#FFEEA3"],[0.591973244147157,"#FFEEA2"],[0.595317725752508,"#FFEDA1"],[0.59866220735786,"#FFEDA0"],[0.602006688963211,"#FFEC9F"],[0.605351170568562,"#FFEB9E"],[0.608695652173913,"#FFEB9D"],[0.612040133779264,"#FFEA9C"],[0.615384615384615,"#FFE99B"],[0.618729096989967,"#FFE99A"],[0.622073578595318,"#FFE899"],[0.625418060200669,"#FFE898"],[0.62876254180602,"#FFE797"],[0.632107023411371,"#FFE696"],[0.635451505016722,"#FFE695"],[0.638795986622074,"#FFE594"],[0.642140468227425,"#FEE593"],[0.645484949832776,"#FEE492"],[0.648829431438127,"#FEE391"],[0.652173913043478,"#FEE390"],[0.655518394648829,"#FEE28E"],[0.658862876254181,"#FEE18D"],[0.662207357859532,"#FEE18C"],[0.665551839464883,"#FEE08B"],[0.668896321070234,"#FEDF8A"],[0.672240802675585,"#FEDD89"],[0.675585284280937,"#FEDC88"],[0.678929765886288,"#FEDA87"],[0.682274247491639,"#FFD886"],[0.68561872909699,"#FFD785"],[0.688963210702341,"#FFD584"],[0.692307692307692,"#FFD483"],[0.695652173913043,"#FFD282"],[0.698996655518395,"#FFD081"],[0.702341137123746,"#FFCF80"],[0.705685618729097,"#FFCD7F"],[0.709030100334448,"#FFCB7E"],[0.712374581939799,"#FFCA7D"],[0.71571906354515,"#FFC87C"],[0.719063545150502,"#FFC77B"],[0.722408026755853,"#FFC57A"],[0.725752508361204,"#FFC379"],[0.729096989966555,"#FFC278"],[0.732441471571906,"#FFC077"],[0.735785953177257,"#FFBE76"],[0.739130434782609,"#FFBD75"],[0.74247491638796,"#FFBB74"],[0.745819397993311,"#FFB973"],[0.749163879598662,"#FFB872"],[0.752508361204013,"#FFB671"],[0.755852842809365,"#FFB470"],[0.759197324414716,"#FFB36F"],[0.762541806020067,"#FFB16E"],[0.765886287625418,"#FFAF6D"],[0.769230769230769,"#FFAE6C"],[0.77257525083612,"#FFAC6B"],[0.775919732441472,"#FEAA6A"],[0.779264214046823,"#FEA969"],[0.782608695652174,"#FEA768"],[0.785953177257525,"#FEA567"],[0.789297658862876,"#FEA466"],[0.792642140468227,"#FEA265"],[0.795986622073579,"#FEA064"],[0.79933110367893,"#FE9F63"],[0.802675585284281,"#FE9D62"],[0.806020066889632,"#FD9B61"],[0.809364548494983,"#FD9960"],[0.812709030100334,"#FD985F"],[0.816053511705686,"#FD965E"],[0.819397993311037,"#FD945D"],[0.822742474916388,"#FD935C"],[0.826086956521739,"#FC915B"],[0.82943143812709,"#FC8F5A"],[0.832775919732442,"#FC8D59"],[0.836120401337793,"#FB8C59"],[0.839464882943144,"#FB8A59"],[0.842809364548495,"#FA8959"],[0.846153846153846,"#F98758"],[0.849498327759197,"#F88658"],[0.852842809364548,"#F88558"],[0.8561872909699,"#F78358"],[0.859531772575251,"#F68258"],[0.862876254180602,"#F58057"],[0.866220735785953,"#F57F57"],[0.869565217391304,"#F47D57"],[0.872909698996655,"#F37C57"],[0.876254180602007,"#F27A57"],[0.879598662207358,"#F17957"],[0.882943143812709,"#F17756"],[0.88628762541806,"#F07656"],[0.889632107023411,"#EF7456"],[0.892976588628763,"#EE7356"],[0.896321070234114,"#EE7156"],[0.899665551839465,"#ED7055"],[0.903010033444816,"#EC6E55"],[0.906354515050167,"#EB6D55"],[0.909698996655518,"#EA6B55"],[0.91304347826087,"#EA6A55"],[0.916387959866221,"#E96854"],[0.919732441471572,"#E86754"],[0.923076923076923,"#E76554"],[0.926421404682274,"#E76354"],[0.929765886287625,"#E66254"],[0.933110367892977,"#E56053"],[0.936454849498328,"#E45F53"],[0.939799331103679,"#E35D53"],[0.94314381270903,"#E35C53"],[0.946488294314381,"#E25A53"],[0.949832775919732,"#E15852"],[0.953177257525084,"#E05752"],[0.956521739130435,"#DF5552"],[0.959866220735786,"#DF5352"],[0.963210702341137,"#DE5251"],[0.966555183946488,"#DD5051"],[0.969899665551839,"#DC4E51"],[0.973244147157191,"#DB4D51"],[0.976588628762542,"#DB4B51"],[0.979933110367893,"#DA4950"],[0.983277591973244,"#D94750"],[0.986622073578595,"#D84550"],[0.989966555183946,"#D74450"],[0.993311036789298,"#D7424F"],[0.996655518394649,"#D6404F"],[1,"#D53E4F"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"thickness":23.04,"title":"Abundancia","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickmode":"array","ticktext":["200","400","600","800"],"tickvals":[0.224858757062147,0.450847457627119,0.67683615819209,0.902824858757062],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":40.8401826484018,"r":7.30593607305936,"b":37.2602739726027,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Muestreos de mariposas en Vietnam","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[12040.9,16179.1],"tickmode":"array","ticktext":["2004","2006","2008","2010","2012","2014"],"tickvals":[12418,13149,13879,14610,15340,16071],"categoryorder":"array","categoryarray":["2004","2006","2008","2010","2012","2014"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Año","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.55,54.55],"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30,40,50],"categoryorder":"array","categoryarray":["0","10","20","30","40","50"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Número de especies","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"44737d40affb":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"44737d40affb","visdat":{"44737d40affb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

---

### Otros geoms - Box-plot

.pull-left[

```r
ggplot(but_sum, 
       aes(x = habitat,
           y = n_species)) +
  geom_boxplot() 
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-42-1.png" width="504" /&gt;
]

---

### Geoms - Box-plot

.pull-left[

```r
ggplot(but_sum, 
       aes(x = habitat,
           y = n_species)) +
  geom_boxplot() +
  geom_jitter(alpha=0.5)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-43-1.png" width="504" /&gt;
]

---

### Variable continua vs. factor

Si queremos hacer un boxplot que muestre el numero de especies por año.

.pull-left[

```r
but_sum %&gt;%
* mutate(year = lubridate::year(date)) %&gt;%
  ggplot(aes(x = year, 
             y = n_species)) +
  geom_boxplot()
```

```
## Warning: Continuous x aesthetic -- did you forget aes(group=...)?
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-44-1.png" width="504" /&gt;
]

---

### Variable continua vs. factor

Si queremos hacer un boxplot que muestre el numero de especies por año - asegurar que la variable año es un factor.

.pull-left[

```r
but_sum %&gt;%
  mutate(year = lubridate::year(date)) %&gt;% 
* mutate(year = as.factor(year)) %&gt;%
  ggplot(aes(x = year, 
             y = n_species)) +
  geom_boxplot()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-45-1.png" width="504" /&gt;
]

---

### Posición de los aesthetics

.pull-left[

```r
but_sum %&gt;%
  mutate(year = lubridate::year(date)) %&gt;%
  ggplot(aes(x = as.factor(year), 
             y = n_species)) +
  geom_boxplot() +
  geom_jitter(alpha = 0.5, 
*             aes(color = habitat))
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-46-1.png" width="504" /&gt;
]

---

### Posición de los aesthetics

.pull-left[

```r
but_sum %&gt;%
  mutate(year = lubridate::year(date)) %&gt;%
  ggplot(aes(x = as.factor(year),
             y = n_species, 
*            color = habitat)) +
  geom_boxplot() +
  geom_jitter(alpha=0.3)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-47-1.png" width="504" /&gt;
]

---

### Geoms - Gráfico de barras

.pull-left[

```r
ggplot(but_sum,
       aes(x = habitat)) + 
  geom_bar()
```
geom_bar usa la funcion `stat_count()` por defecto.
Representa el número (cuenta) de observaciones por hábitat, en este caso de muestreos.
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-48-1.png" width="504" /&gt;
]

---

### Geoms - Gráfico de 'quesos'

Pie-chart

.pull-left[

```r
ggplot(but_sum, 
       aes(x = habitat,
           fill = habitat)) +
  geom_bar() + 
* coord_polar()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-49-1.png" width="504" /&gt;
]

---

### Geoms - Gráfico de barras

Gráfico de barras para datos sumarizados

.pull-left[

```r
but_sum %&gt;%
  group_by(habitat) %&gt;%
  summarise(mean_abundance = mean(abundance)) %&gt;%
  ggplot(aes(x = habitat,
             y = mean_abundance)) + 
* geom_col()
```

Alternativa (mismo resultado):

```r
but_sum %&gt;%
  group_by(habitat) %&gt;%
  summarise(mean_abundance = mean(abundance)) %&gt;%
  ggplot(aes(x = habitat,
             y = mean_abundance)) +  
* geom_bar(stat = "identity")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-51-1.png" width="504" /&gt;
]

---

### Geoms - Gráfico de barras

Gráfico de barras apilados

.pull-left[

```r
but_sum %&gt;% 
  mutate(year = lubridate::year(date)) %&gt;%
  ggplot(aes(x = as.factor(year),
*            fill = habitat)) +
  geom_bar() +
  MetBrewer::scale_fill_met_d("Archambault")
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-52-1.png" width="504" /&gt;
]

---

### Geoms - Histograma

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species)) + 
* geom_histogram()
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-53-1.png" width="504" /&gt;
]

---

### Geoms - Histograma

.pull-left[

```r
ggplot(but_sum, 
       aes(x = n_species)) + 
  geom_histogram(color = "blue",
*                bins = 10)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-54-1.png" width="504" /&gt;
]

---

### Geoms - Histograma

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species)) + 
  geom_histogram(color = "blue",
*                binwidth = 1)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-55-1.png" width="504" /&gt;
]

---

### Geoms - Densidad

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species)) + 
* geom_density()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-56-1.png" width="504" /&gt;
]

---

### Geoms - Densidad

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species,
*          color = hab_type)) +
  geom_density() 
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-57-1.png" width="504" /&gt;
]

---

### Geoms - Densidad

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species,
           color = hab_type,
           fill = hab_type)) + 
  geom_density(alpha = 0.5)
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-58-1.png" width="504" /&gt;
]

---

### Ejercicio 4:

Hacer un violin plot (`geom_violin`) del número de especies de mariposas por hábitat donde el color represente el tipo de hábitat (forest vs. open)

---


### Ejercicio 4:

Hacer un violin plot (`geom_violin`) del número de especies de mariposas por hábitat donde el color represente el tipo de hábitat (forest vs. open)

.pull-left[

```r
ggplot(but_sum, 
       aes(x = habitat,
           y = n_species,
           fill = hab_type)) +
  geom_violin(alpha = 0.5) +
  scale_fill_manual(values = 
         c("dark green", "brown")) +
  labs(title = "Muestreo de mariposas en Vietnam de 2003-2013",
       y = "Número de especies",
       x = NULL)
```

```
## Warning: Groups with fewer than two data points have been dropped.
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-59-1.png" width="504" /&gt;
]

---

### 8. Facets

.pull-left[

```r
ggplot(but_sum , 
       aes(x = n_species)) +
  geom_histogram() +
* facet_wrap(~ habitat)
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-60-1.png" width="504" /&gt;
]

---

### 8. Facets

.pull-left[

```r
but_sum %&gt;%
  filter(habitat != "unknown") %&gt;%
  ggplot(aes(x = n_species)) +
  geom_histogram() +
  facet_wrap(~ habitat,
*            scales = "free") +
  labs(caption =
         "note different axes scales")
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-61-1.png" width="504" /&gt;
]

---

### 8. Facets

.pull-left[

```r
but_sum %&gt;%
  filter(habitat != "unknown") %&gt;%
  mutate(year = as.factor(
    lubridate::year(date))) %&gt;%
  ggplot(aes(x = n_species)) +
  geom_histogram() +
* facet_grid(year ~ habitat)
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-62-1.png" width="504" /&gt;
]

---

### 9. Themes

.pull-left[

```r
ggplot(but_sum,
       aes(x = habitat,
           y = n_species,
           color = hab_type)) +
  geom_boxplot() +  
* theme(legend.position = "bottom",
*       axis.text.x = element_blank())
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-63-1.png" width="504" /&gt;
]

---

### 9. Themes

.pull-left[

```r
ggplot(but_sum,
       aes(x = habitat,
           y = n_species,
           color = hab_type)) +
  geom_boxplot() +  
* theme(legend.position = "none",
*       axis.text.x = element_text(
*         angle = 90, hjust = 0, vjust = 0.5))
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-64-1.png" width="504" /&gt;
]

---

### 9. Themes


```r
?theme
```

- element_blank()
- element_text()
- element_line()
- element_rect() (borders &amp; backgrounds)

---

### 9. Themes

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species,
           y = abundance)) +
  geom_point() +  
  theme_minimal()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-66-1.png" width="504" /&gt;
]

---

### 9. Themes

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species,
           y = abundance)) +
  geom_point(color= "white") +  
  theme_dark()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-67-1.png" width="504" /&gt;
]

---

### 9. Themes

.pull-left[

```r
ggplot(but_sum,
       aes(x = n_species,
           y = abundance)) +
  geom_point() + 
  theme_void()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-68-1.png" width="504" /&gt;
]

---

### 9. Themes

.pull-left[

```r
library(hrbrthemes)
```


```r
ggplot(but_sum,
       aes(x = n_species,
           y = abundance)) +
  geom_point() + 
  hrbrthemes::theme_ipsum_rc()
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-70-1.png" width="504" /&gt;
]

---

### 9. Themes

Addin de RStudio que ayuda a cambiar la apariencia de los temas.


```r
library(ggThemeAssist)
```

https://github.com/calligross/ggthemeassist

---

### 9. Themes

Existen muchos paquetes con temas predeterminados. Muchos también vienen con especificaciones para escalas de los aesthetics (scales)

```r
library(hrbrthemes)
library(ggthemes)
library(ggpomological)
#devtools::install_github("gadenbuie/ggpomological")
library(tvthemes)
library(ggtech)
library(ggthemr)
library(ggsci)
```

Para fijar un tema que se aplique a todos los gráficos:


```r
theme_set(theme_minimal())
```

---

### 10. Composicion de figuras - Patchwork


```r
library(patchwork)
```

&lt;img src= "https://patchwork.data-imaginist.com/reference/figures/logo.png", width=30%&gt;

---

### 10. Composicion de figuras

Nombrar los plots como objetos

.pull-left[

```r
p1 &lt;- ggplot(but_sum,
       aes(x = n_species,
           y = abundance)) +
  geom_point(color = "#FFB90F", 
             alpha = 0.7) + 
  geom_smooth(color = "grey70") + 
  theme_light() + 
  labs(x = "No. of species",
       y = "Abundance")

p1 + labs(
  title = "Butterfly census in tropical areas"
)
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-75-1.png" width="504" /&gt;
]
---

### 10. Composicion de figuras

.pull-left[

```r
p2 &lt;- 
  ggplot(filter(but_sum, habitat != "unknown"),
         aes(x = habitat,
             y = n_species,
             colour = habitat,
             fill = habitat)) +
  geom_boxplot(alpha = .5) +
  geom_jitter(alpha = .5) +
  MetBrewer::scale_fill_met_d("Derain") + 
  MetBrewer::scale_color_met_d("Derain") + 
  theme_light() + 
  theme(legend.position = "none",
        axis.text.x = element_text(
          angle = 30, hjust = 1)) +
  labs(y = "No. of species",
       x = "Habitat type",)

p2
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-76-1.png" width="504" /&gt;
]

---

### 10. Composicion de figuras

.pull-left[

```r
p1 / p2 + plot_annotation( 
  title = "Butterfly census in Vietnam",
  subtitle = "Bonebrake et al. 2016",
  tag_levels = 'A')
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```
]

.pull-right[
&lt;img src="data_visualization_slides_files/figure-html/unnamed-chunk-77-1.png" width="504" /&gt;
]

---

### Guardar gráficos


```r
plot_to_save &lt;- p1 / p2 + plot_annotation( 
  title = "Butterfly census in Vietnam",
  subtitle = "Bonebrake et al. 2016",
  tag_levels = 'A')
```


```r
ggsave(plot_to_save, width = 20, units = "cm", filename = here("img/figure_1.pdf"))
```

```
## Saving 20 x 17.8 cm image
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

Argumentos:

- width
- height
- units = ("in", "cm", "mm", "px")
- device = ("png", "pdf, "jpeg", "tiff", "svg"...)

---

### Otros paquetes útiles - `library(ggdist)`

Graficar datos con distribuciones amplias (ej. Bayes posteriors).

&lt;img src = "https://mjskay.github.io/ggdist/reference/figures/preview.png", width=60%&gt;

https://mjskay.github.io/ggdist/

---

### Otros paquetes útiles - `library(ggrepel)`

&lt;img src = "https://ggrepel.slowkow.com/articles/examples_files/figure-html/remove_a_2-1.png", width=70%&gt;

https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html

---

### Otros paquetes útiles - `library(GGally)`

Para la exploración de datos y relación entre variables.

.pull-left[

https://github.com/ggobi/ggally


```r
GGally::ggpairs(dataset)
```

]

.pull-right[
&lt;img src = "https://r-charts.com/es/correlacion/ggpairs_files/figure-html/ggpairs.png"&gt;
]

---

### Otros paquetes útiles - `library(gganimate)`

&lt;img src = "https://gganimate.com/reference/figures/README-unnamed-chunk-4-1.gif", width=70%&gt;

https://gganimate.com/

---

### Otros paquetes útiles - `library(ggtext)`

&lt;img src = "https://github.com/wilkelab/ggtext/raw/master/man/figures/README-unnamed-chunk-8-1.png", width=70%&gt;

https://github.com/wilkelab/ggtext

---

### Otros paquetes útiles - `library(ggforce)`

Resaltar características de los datos.

![](https://rviews.rstudio.com/post/2019-09-16-intro-to-ggforce_files/figure-html/unnamed-chunk-6-1.png)

https://github.com/thomasp85/ggforce

---

### Más extensiones de GGplot

https://exts.ggplot2.tidyverse.org/gallery/

![](../img/ggplot_ext.png)

---

### Más extensiones de GGplot

https://github.com/erikgahner/awesome-ggplot2

![](../img/awesome_ggplot.png)

---

### #TidyTuesday

&amp;nbsp;

.center[&lt;img src = "https://github.com/rfordatascience/tidytuesday/raw/master/static/tt_logo.png", width=70%&gt;]

https://github.com/rfordatascience/tidytuesday

---

# Recursos

- [Referencia oficial Ggplot2](https://ggplot2.tidyverse.org/reference/)

- [Ggplot2 book - Hadley Wickham](https://ggplot2-book.org/)

- [R for Data Science Book - 3. Data visualization](https://r4ds.had.co.nz/data-visualisation.html)

- [R Graphics Cookbook, 2nd edition - Winston Chang](https://r-graphics.org/)

- [Fundamentals of Data Visualization - Claus O. Wilke](https://clauswilke.com/dataviz/)

- [RStudio CheatSheets - *"Data visualization with ggplot2"*](https://www.rstudio.com/resources/cheatsheets/)

.right[&lt;img src= "https://ggplot2.tidyverse.org/logo.png", width=15%&gt;]

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;





&lt;img src="data_visualization_slides_files/figure-html/figure.1-1.png" width="1080" /&gt;

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;

Leer datos:

```r
waste_world &lt;- read_csv(here("data/waste_world.csv"))
```

```
## Rows: 217 Columns: 18
## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (6): iso_a3, region_id, country, income_id, country_name, continent
## dbl (12): gdp, population, total_waste, composition_food_organic_waste_percent, composition_glass_percent...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;

Generar dataset para la figura:

```r
waste_world_mod &lt;- waste_world %&gt;%
  mutate(waste_per_capita = total_waste/population) %&gt;%
  filter(!is.na(waste_per_capita) &amp; !is.na(continent))
```

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;

Código de la gráfica:

```r
ggplot(waste_world_mod, aes(
            x = waste_per_capita,
            y = gdp,
            color = continent)) +
  geom_point(alpha = 0.7, 
             size = 2) + 
  rcartocolor::scale_color_carto_d("Vivid") +
  ggrepel::geom_text_repel(data = waste_world_mod %&gt;%  #mostar solo la etiqueta para aquellos paises con mas waste/caita o gdp
                             filter(waste_per_capita &gt; 0.8 | 
                                      gdp &gt; 80000), 
                           aes(x = waste_per_capita, 
                               y = gdp, 
                               label = country_name),
                           size = 3,
                           show.legend = FALSE) + #para que no muestre texto en la leyenda 
  theme_minimal() + 
  theme(legend.position = "bottom") + 
  labs(x = "Waste per cápita (tones per year)",
       y = "Gross Domestic Product (GDP)")
```

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;



&lt;img src="data_visualization_slides_files/figure-html/figure.2-1.png" width="1080" /&gt;

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;

Generar dataset para la gráfica 2:


```r
waste_world_mod2 &lt;- waste_world %&gt;%
  mutate(waste_per_capita = total_waste/population) %&gt;%
  filter(!is.na(waste_per_capita) &amp; !is.na(continent)) %&gt;%
  filter(continent != "Seven seas (open ocean)")
```

---

&lt;font size ="6"&gt;Ejemplo con el dataset de waste_world&lt;/font&gt;

Código de la gráfica 2:

```r
ggplot(waste_world_mod2, aes(
            x = waste_per_capita,
            y = gdp,
            color = continent,
            size = population)) +
  geom_point(alpha = 0.8) + 
  rcartocolor::scale_color_carto_d("Vivid") +
  ggrepel::geom_text_repel(data = waste_world_mod2 %&gt;% #código para seleccionar que etiquetas mostrar
                             group_by(continent) %&gt;% 
                             mutate(order = waste_per_capita*gdp) %&gt;% #variable en la que basar qué etiquetas se muestran
                             arrange(desc(order)) %&gt;% #ordenar por continente los países que tengan más waste/capita * gpd
                             slice(1:3), #seleccionar los 3 países con valores más altos
                           aes(x = waste_per_capita, 
                               y = gdp, 
                               label = country_name),
                            force = 100, #repulsion entre etiquetas
                           size = 3) + #tamaño de la etiqueta
  theme_bw() + 
  theme(legend.position = "none") + 
  facet_wrap(~continent) +
  labs(x = "Waste per cápita (tones per year)",
       y = "Gross Domestic Product (GDP)",
       size = "Population",
       caption = "Point size represents population")
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "tomorrow",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
